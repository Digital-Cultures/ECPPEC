<div echarts (chartInit)="onChartInit($event)" [merge]="updateOptions" [options]="chartOption" class="demo-chart"></div>
<div echarts [options]="pieOptions" [theme]="theme" [merge]="updatePieOptions" class="demo-chart1"></div>

<table *ngIf="dataSource" mat-table [dataSource]="dataSource" class="mat-elevation-z8 mytable style-3 stay_inline">

    <ng-container matColumnDef="constituency">
        <th mat-header-cell *matHeaderCellDef> <span matTooltip="click to find out more about consitituencies" [matTooltipPosition]="'above'">Constituency</span>
            <div>
                <mat-form-field>
                    <input matInput class="form-field" [formControl]="constituencyFilter" placeholder="....">
                </mat-form-field>
            </div>
        </th>
        <td mat-cell *matCellDef="let element"> {{element.constituency}} </td>
    </ng-container>

    <ng-container matColumnDef="election_month">
        <th mat-header-cell *matHeaderCellDef> <span matTooltip="click to find out more about months" [matTooltipPosition]="'above'">Month </span>
            <div>
                <mat-form-field>
                    <input matInput class="form-field" [formControl]="monthFilter" placeholder="....">
                </mat-form-field>
            </div>
        </th>
        <td mat-cell *matCellDef="let element"> {{element.election_month}} </td>
    </ng-container>

    <ng-container matColumnDef="election_year">
        <th mat-header-cell *matHeaderCellDef> <span matTooltip="click to find out more about years" [matTooltipPosition]="'above'">Year </span>
            <div>
                <mat-form-field>
                    <input matInput class="form-field" [formControl]="yearFilter" placeholder="....">
                </mat-form-field>
            </div>
        </th>
        <td mat-cell *matCellDef="let element"> {{element.election_year}} </td>
    </ng-container>

    <ng-container matColumnDef="countyboroughuniv">
        <th mat-header-cell *matHeaderCellDef> <span matTooltip="click to find out more about the different kinds of elections" [matTooltipPosition]="'above'">County/Borough/Univ </span>
            <div>
                <!-- <mat-form-field>
<input matInput class="form-field" [formControl]="countyFilter" placeholder="....">
</mat-form-field> -->
                <mat-select [formControl]="countyFilter" [(value)]="countyFilter.value">
                    <mat-option value="">Any</mat-option>
                    <mat-option value="C">C</mat-option>
                    <mat-option value="B">B</mat-option>
                    <mat-option value="U">U</mat-option>
                </mat-select>
            </div>
        </th>
        <td mat-cell *matCellDef="let element"> {{element.countyboroughuniv}} </td>
    </ng-container>

    <ng-container matColumnDef="contested">
        <th mat-header-cell *matHeaderCellDef> <span matTooltip="Not all elections were fought. click to find out more" [matTooltipPosition]="'above'">Contested?</span>
            <div>
                <mat-form-field>

                    <mat-select [formControl]="contestedFilter" [(value)]="contestedFilter.value">
                        <mat-option value="">Any</mat-option>
                        <mat-option value="Y">Yes</mat-option>
                        <mat-option value="N">No</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </th>
        <td mat-cell *matCellDef="let element"> {{element.contested}} </td>
    </ng-container>



    <ng-container matColumnDef="by_election_general">
        <th mat-header-cell *matHeaderCellDef> <span matTooltip="general elections happened every 4 years. click to find out more about them" [matTooltipPosition]="'above'">By/General Election </span>
            <div>
                <mat-form-field>

                    <mat-select [formControl]="byElectionGeneralFilter" [(value)]="byElectionGeneralFilter.value">
                        <mat-option value="">Any</mat-option>
                        <mat-option value="B">By Election</mat-option>
                        <mat-option value="G">General Election</mat-option>
                    </mat-select>

                </mat-form-field>
            </div>
        </th>
        <td mat-cell *matCellDef="let element"> {{element.by_election_general}} </td>
    </ng-container>

    <ng-container matColumnDef="by_election_cause">
        <th mat-header-cell *matHeaderCellDef> <span matTooltip="general elections happened every 4 years. click to find out more about them" [matTooltipPosition]="'above'">By Election Cause </span>
            <div>
                <mat-form-field>

                    <input matInput class="form-field" [formControl]="byElectionCauseFilter" placeholder="....">

                </mat-form-field>
            </div>
        </th>
        <td mat-cell *matCellDef="let element"> {{element.by_election_cause}} </td>
    </ng-container>


    <ng-container matColumnDef="franchise_type">
        <th mat-header-cell *matHeaderCellDef> <span matTooltip="click to find out more about franchiseTypes" [matTooltipPosition]="'above'">Franchise </span>
            <div>
                <mat-form-field>
                    <input matInput class="form-field" [formControl]="franchiseFilter" placeholder="....">
                </mat-form-field>
            </div>
        </th>
        <td mat-cell *matCellDef="let element"> {{element.franchise_type}} </td>
    </ng-container>

    <ng-container matColumnDef="pollbook_id">
        <th mat-header-cell *matHeaderCellDef><span matTooltip="poll books contain important details of voters. click to find out more" [matTooltipPosition]="'above'"> Has Poll Books? </span>
            <div>
                <mat-form-field>
                    <mat-select [formControl]="pollBookCodeFilter" [(value)]="pollBookCodeFilter.value">
                        <mat-option value="">Any</mat-option>
                        <mat-option value="Y">Yes</mat-option>
                        <mat-option value="N">No</mat-option>
                    </mat-select>

                </mat-form-field>
            </div>
        </th>
        <td mat-cell id="pollBookCell" (click)="getBook($event, element)" *matCellDef="let element"> {{getHasPollBooks(element.pollbook_id)}}</td>
    </ng-container>



    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
<!-- <mat-paginator id="pagin" [pageSize]="10" [pageSizeOptions]="[5, 10, 20, 50, 100, 500]" showFirstLastButtons></mat-paginator> -->