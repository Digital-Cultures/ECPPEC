import * as tslib_1 from "tslib";
import { Swipe_Up } from './icons/Swipe_Up';
import { Swipe_Right } from './icons/Swipe_Right';
import { Swipe_Left } from './icons/Swipe_Left';
import { Swipe_Down } from './icons/Swipe_Down';
import { Double_Tap } from './icons/Double_Tap';
import { Single_Tap } from './icons/Single_Tap';
import { Hotspot_Close } from './icons/Hotspot_Close';
import { Component, Input, Output, HostListener, ElementRef, EventEmitter, ViewChild } from '@angular/core';
const ZINDEX_NOT_SET = '-99999';
let WalkthroughComponent = class WalkthroughComponent {
    constructor() {
        this._focusElementZindexes = [];
        this.DOM_WALKTHROUGH_CLASS = 'walkthrough-background';
        this.DOM_WALKTHROUGH_TRANSPARENCY_TEXT_CLASS = '.walkthrough-text';
        this.DOM_WALKTHROUGH_TIP_TEXT_CLASS = '.walkthrough-tip-text-box';
        this.DOM_WALKTHROUGH_HOLE_CLASS = '.walkthrough-hole';
        this.DOM_WALKTHROUGH_TRANSPARENCY_ICON_CLASS = '.walkthrough-icon';
        this.DOM_WALKTHROUGH_TIP_ICON_CLASS = '.walkthrough-tip-icon-text-box';
        this.DOM_WALKTHROUGH_ARROW_CLASS = '.walkthrough-arrow';
        this.DOM_WALKTHROUGH_DONE_BUTTON_CLASS = 'walkthrough-done-button';
        this.DOM_TRANSCLUDE = 'walkthrough-transclude';
        this.BUTTON_CAPTION_DONE = 'Got it!';
        this.PADDING_HOLE = 5;
        this.PADDING_ARROW_START = 5;
        this.PADDING_ARROW_MARKER = 25;
        this.isVisible = false;
        this.hasTransclude = false;
        // single_tap: string = require('../assets/Single_Tap.png');
        // double_tap: string = require('../assets/Double_Tap.png');
        // swipe_down: string = require('../assets/Swipe_Down.png');
        // swipe_left: string = require('../assets/Swipe_Left.png');
        // swipe_right: string = require('../assets/Swipe_Right.png');
        // swipe_up: string = require('../assets/Swipe_Up.png');
        // the element have been separated as ionic pro cannot handle class with very large string
        this.single_tap = new Single_Tap().single_tap;
        this.double_tap = new Double_Tap().double_tap;
        this.swipe_down = new Swipe_Down().swipe_down;
        this.swipe_left = new Swipe_Left().swipe_left;
        this.swipe_right = new Swipe_Right().swipe_right;
        this.swipe_up = new Swipe_Up().swipe_up;
        this.useButton = false;
        this.hasGlow = false;
        this.isRound = false;
        this.iconPaddingLeft = '';
        this.iconPaddingTop = '';
        this.focusElementSelector = '';
        this.focusElementInteractive = false;
        this.isActive = false;
        this.onWalkthroughShowEvent = new EventEmitter();
        this.onWalkthroughHideEvent = new EventEmitter();
        this.onWalkthroughContentClickedEvent = new EventEmitter();
    }
    onResize(event) {
        if (this.isVisible) {
            this.resizeHandler();
        }
    }
    ngOnChanges(changes) {
        for (const propName in changes) {
            if (changes.hasOwnProperty(propName)) {
                const change = changes[propName];
                if (propName === 'isActive' && change.currentValue) {
                    this.setWalkthroughElements();
                    this.isVisible = change.currentValue;
                }
            }
        }
    }
    ngAfterContentChecked() {
        if (this.focusElementSelector && this.isVisible) {
            this.setFocusOnElement();
        }
    }
    /**
     * resize handler method
     */
    resizeHandler() {
        if (this.focusElementSelector && this.isVisible) {
            this.setFocusOnElement();
        }
    }
    /**
     * init the element of the walkthrough
     */
    setWalkthroughElements() {
        const holeElements = this.element.nativeElement.querySelectorAll(this.DOM_WALKTHROUGH_HOLE_CLASS);
        this.walkthroughHoleElements = holeElements[0];
        const textClass = (this.walkthroughType === 'tip') ? this.DOM_WALKTHROUGH_TIP_TEXT_CLASS : this.DOM_WALKTHROUGH_TRANSPARENCY_TEXT_CLASS;
        this.walkthroughTextElement = this.element.nativeElement.querySelectorAll(textClass)[0];
        const iconClass = (this.walkthroughType === 'tip') ? this.DOM_WALKTHROUGH_TIP_ICON_CLASS : this.DOM_WALKTHROUGH_TRANSPARENCY_ICON_CLASS;
        this.walkthroughIconElement = this.element.nativeElement.querySelectorAll(iconClass)[0];
        this.walkthroughArrowElement = this.element.nativeElement.querySelectorAll(this.DOM_WALKTHROUGH_ARROW_CLASS)[0];
        setTimeout(() => {
            this.closeIcon = new Hotspot_Close().close_icon;
        }, 100);
        this.walkthroughIcon = this.getIcon(this.walkthroughIconWanted);
        this.buttonCaption = this.buttonCaption || this.BUTTON_CAPTION_DONE;
        if (this.hasBackdrop === undefined) {
            this.hasBackdrop = (this.walkthroughType !== 'tip');
        }
    }
    ngAfterViewChecked() {
        const translude = this.element.nativeElement.querySelectorAll('.' + this.DOM_TRANSCLUDE);
        if (translude.length > 0 && translude[0].children.length > 0) {
            this.hasTransclude = true;
        }
        if (this.isVisible) {
            this.onWalkthroughShowEvent.emit();
        }
    }
    /**
     * Get the icon specify by the input
     * @param icon
     */
    getIcon(icon) {
        let retval = '';
        switch (icon) {
            case ('single_tap'):
                retval = this.single_tap;
                break;
            case ('double_tap'):
                retval = this.double_tap;
                break;
            case ('swipe_down'):
                retval = this.swipe_down;
                break;
            case ('swipe_left'):
                retval = this.swipe_left;
                break;
            case ('swipe_right'):
                retval = this.swipe_right;
                break;
            case ('swipe_up'):
                retval = this.swipe_up;
                break;
            case ('arrow'):
                // Return nothing, using other dom element for arrow
                retval = '';
                break;
        }
        if (retval === '' && icon && icon.length > 0) {
            retval = icon;
        }
        else {
            this.toDataURL(retval).then((dataUrl) => {
                if (typeof dataUrl === 'string') {
                    retval = dataUrl;
                }
            });
        }
        return retval;
    }
    /**
     * Convert url in blob
     * @param url
     */
    toDataURL(url) {
        return fetch(url)
            .then(response => response.blob())
            .then(blob => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onloadend = () => {
                    resolve(reader.result);
                    reader.onerror = reject;
                    reader.readAsDataURL(blob);
                };
            });
        });
    }
    /**
     * Set the text position accordint the hole and arrow position plus set the arrow
     * @param pointSubjectLeft
     * @param pointSubjectTop
     * @param pointSubjectWidth
     * @param pointSubjectHeight
     * @param paddingLeft
     */
    setArrowAndText(pointSubjectLeft, pointSubjectTop, pointSubjectWidth, pointSubjectHeight, paddingLeft) {
        const offsetCoordinates = this.getOffsetCoordinates(this.walkthroughTextElement);
        const startLeft = offsetCoordinates.left + offsetCoordinates.width / 2;
        let startTop = offsetCoordinates.top + offsetCoordinates.height + this.PADDING_ARROW_START;
        let endLeft = 0;
        let isLine = false;
        if (Math.abs(startLeft - (pointSubjectLeft + pointSubjectWidth / 2)) < 10) {
            console.warn('Hole element and text are inline line arrow will be used');
            endLeft = pointSubjectLeft + pointSubjectWidth / 2;
            isLine = true;
        }
        else if (startLeft > pointSubjectLeft) {
            // If hole left to text set arrow to point to middle right
            endLeft = pointSubjectLeft + paddingLeft + pointSubjectWidth;
        }
        else if (startLeft < pointSubjectLeft) {
            // If hole right to text set arrow to point to middle left
            endLeft = pointSubjectLeft - paddingLeft;
        }
        let endTop;
        if (isLine) {
            endTop = pointSubjectTop - this.PADDING_ARROW_MARKER;
        }
        else {
            endTop = pointSubjectTop + (pointSubjectHeight / 2);
        }
        let arrowLeft, arrowRight, arrowTop, arrowBottom;
        // Check if text overlaps icon or user explicitly wants text at bottom, if does, move it to bottom
        arrowLeft = (startLeft < endLeft) ? startLeft : endLeft;
        arrowRight = (startLeft < endLeft) ? endLeft : startLeft;
        arrowTop = (startTop < endTop) ? startTop : endTop;
        arrowBottom = (startTop < endTop) ? endTop : startTop;
        if (this.forceCaptionLocation === undefined && this.isItemOnText(arrowLeft, arrowTop, arrowRight, arrowBottom)) {
            this.forceCaptionLocation = 'BOTTOM';
        }
        if (this.forceCaptionLocation === 'BOTTOM') {
            if (isLine) {
                endTop = pointSubjectTop + pointSubjectHeight + this.PADDING_ARROW_MARKER;
            }
            startTop = offsetCoordinates.top - this.PADDING_ARROW_START;
        }
        let arrowSvgDom;
        if (isLine) {
            arrowSvgDom =
                '<svg width="100%" height="100%">' +
                    '<defs>' +
                    '<marker id="arrow" markerWidth="13" markerHeight="13" refx="2" refy="6" orient="auto">' +
                    '<path d="M2,1 L2,10 L10,6 L2,2" style="fill:#fff;" />' +
                    '</marker>' +
                    '</defs>' +
                    '<line x1=' + endLeft + ' y1=' + startTop + ' x2=' + endLeft + ' y2=' + endTop + ' ' +
                    'style="stroke:#fff; stroke-width: 2px; fill: none;' +
                    'marker-end: url(#arrow);"/>' +
                    '/>' +
                    '</svg>';
        }
        else {
            arrowSvgDom =
                '<svg width="100%" height="100%">' +
                    '<defs>' +
                    '<marker id="arrow" markerWidth="13" markerHeight="13" refx="2" refy="6" orient="auto">' +
                    '<path d="M2,1 L2,10 L10,6 L2,2" style="fill:#fff;" />' +
                    '</marker>' +
                    '</defs>' +
                    '<path d="M' + startLeft + ',' + startTop + ' Q' + startLeft + ',' + endTop + ' ' + endLeft + ',' + endTop + '"' +
                    'style="stroke:#fff; stroke-width: 2px; fill: none;' +
                    'marker-end: url(#arrow);"/>' +
                    '/>' +
                    '</svg>';
        }
        const arrowElement = this.element.nativeElement.querySelector(this.DOM_WALKTHROUGH_ARROW_CLASS);
        if (arrowElement.children.length > 0) {
            arrowElement.children[0].remove();
        }
        arrowElement.insertAdjacentHTML('afterbegin', arrowSvgDom);
    }
    /**
     * Check if given icon covers text or if the text cover the hole
     * @param iconLeft
     * @param iconTop
     * @param iconRight
     * @param iconBottom
     */
    isItemOnText(iconLeft, iconTop, iconRight, iconBottom) {
        const holeCoordinates = this.getOffsetCoordinates(this.walkthroughHoleElements);
        const offsetCoordinates = this.getOffsetCoordinates(this.walkthroughTextElement);
        const holeLeft = holeCoordinates.left;
        const holeRight = holeCoordinates.left + holeCoordinates.width;
        const holeTop = holeCoordinates.top;
        const holeBottom = holeCoordinates.top + holeCoordinates.height;
        const textLeft = document.body.clientWidth / 4;
        // needs to be calculated differently due to being a 'pre'. //offsetCoordinates.left;
        const textRight = document.body.clientWidth / 4 * 3;
        // offsetCoordinates.left + offsetCoordinates.width;
        const textTop = offsetCoordinates.top;
        const textBottom = offsetCoordinates.top + offsetCoordinates.height;
        if (!(holeRight < textLeft ||
            holeLeft > textRight ||
            holeBottom < textTop ||
            holeTop > textBottom)) {
            return true;
        }
        return !(iconRight < textLeft ||
            iconLeft > textRight ||
            iconBottom < textTop ||
            iconTop > textBottom);
    }
    /**
     * REcover the offset coordinates
     * @param focusElement
     */
    getOffsetCoordinates(focusElement) {
        let width;
        let height;
        let left;
        let top;
        width = focusElement.offsetWidth;
        height = focusElement.offsetHeight;
        left = focusElement.getBoundingClientRect().left;
        top = focusElement.getBoundingClientRect().top;
        let sameAncestorForFocusElementAndWalkthrough = this.getSameAncestor(focusElement);
        while (sameAncestorForFocusElementAndWalkthrough) {
            left = left - sameAncestorForFocusElementAndWalkthrough.offsetLeft;
            top = top - sameAncestorForFocusElementAndWalkthrough.offsetTop;
            sameAncestorForFocusElementAndWalkthrough = sameAncestorForFocusElementAndWalkthrough.offsetParent;
        }
        return { top: top, left: left, height: height, width: width };
    }
    // Check once
    getSameAncestor(focusElement) {
        let retval = null;
        const walkthroughElementParent = this.element.nativeElement.offsetParent;
        const focusElementParent = focusElement.offsetParent;
        let walkthroughAncestorIter = walkthroughElementParent;
        let focusElementAncestorIter = focusElementParent;
        while (walkthroughAncestorIter && !retval) {
            focusElementAncestorIter = focusElementParent; // reset
            while (focusElementAncestorIter && !retval) {
                if (focusElementAncestorIter === walkthroughAncestorIter) {
                    retval = walkthroughAncestorIter;
                }
                else {
                    focusElementAncestorIter = focusElementAncestorIter.offsetParent;
                }
            }
            walkthroughAncestorIter = walkthroughAncestorIter.offsetParent;
        }
        return retval;
    }
    /**
     * Sets the icon displayed according to directive argument
     * @param iconLeft
     * @param iconTop
     * @param paddingLeft
     * @param paddingTop
     */
    setIconAndText(iconLeft, iconTop, paddingLeft, paddingTop) {
        const offsetCoordinates = this.getOffsetCoordinates(this.walkthroughIconElement);
        const iconHeight = offsetCoordinates.height;
        const iconWidth = offsetCoordinates.width;
        const iconLeftWithPadding = iconLeft + paddingLeft - (iconWidth / 4);
        const iconTopWithPadding = iconTop + paddingTop - (iconHeight / 6);
        const iconRight = iconLeftWithPadding + iconWidth;
        const iconBottom = iconTopWithPadding + iconHeight;
        // Check if text overlaps icon or user explicitly wants text at bottom, if does, move it to bottom
        if (this.forceCaptionLocation === undefined && this.isItemOnText(iconLeftWithPadding, iconTopWithPadding, iconRight, iconBottom)) {
            this.forceCaptionLocation = 'BOTTOM';
        }
        const iconLocation = 'position: absolute;' +
            'left:' + iconLeftWithPadding + 'px;' +
            'top:' + iconTopWithPadding + 'px;';
        this.walkthroughIconElement.setAttribute('style', iconLocation);
    }
    /**
     * Attempts to highlight the given element ID and set Icon to it if exists, if not use default - right under text
     */
    setElementLocations() {
        let selectorElements = (this.focusElementSelector) ? document.querySelectorAll(this.focusElementSelector) : null;
        if (selectorElements && selectorElements.length > 0) {
            if (selectorElements.length > 1) {
                console.warn('Multiple items fit selector, displaying first visible as focus item');
            }
        }
        else {
            console.error('No element found with selector: ' + this.focusElementSelector);
            selectorElements = null;
        }
        let htmlElement = null;
        if (selectorElements) {
            htmlElement = selectorElements[0];
        }
        if (htmlElement) {
            const offsetCoordinates = this.getOffsetCoordinates(htmlElement);
            const width = offsetCoordinates.width;
            const height = offsetCoordinates.height;
            const left = offsetCoordinates.left;
            const top = offsetCoordinates.top;
            this.setFocus(left, top, width, height);
            let paddingLeft = parseFloat(this.iconPaddingLeft);
            let paddingTop = parseFloat(this.iconPaddingTop);
            if (!paddingLeft) {
                paddingLeft = 0;
            }
            if (!paddingTop) {
                paddingTop = 0;
            }
            // If Gesture icon given bind it to hole as well
            if (this.walkthroughIconWanted && this.walkthroughIconWanted !== 'arrow' && this.walkthroughType === 'transparency') {
                setTimeout(() => {
                    this.setIconAndText(left + width / 2, top + height / 2, paddingLeft, paddingTop);
                }, 200);
            }
            if (this.walkthroughIconWanted === 'arrow') {
                // Need to update text location according to conditional class added 'walkthrough-transparency-bottom'
                setTimeout(() => {
                    this.setArrowAndText(left, top + paddingTop, width, height, paddingLeft);
                }, 200);
            }
            // if tip mode with icon that we want to set padding to, set it
            if (this.walkthroughType === 'tip' &&
                this.walkthroughIconWanted && this.walkthroughIconWanted.length > 0 &&
                (this.iconPaddingLeft || this.iconPaddingTop)) {
                this.setTipIconPadding(this.iconPaddingLeft, this.iconPaddingTop);
            }
        }
        else {
            if (this.focusElementSelector) {
                console.error('Unable to find element requested to be focused: ' + this.focusElementSelector);
            }
            else {
                // if tip mode with icon that we want to set padding to, set it
                if (this.walkthroughType === 'tip' &&
                    this.walkthroughIconWanted && this.walkthroughIconWanted.length > 0 &&
                    (this.iconPaddingLeft || this.iconPaddingTop)) {
                    this.setTipIconPadding(this.iconPaddingLeft, this.iconPaddingTop);
                }
            }
        }
        if (this.focusElementInteractive && selectorElements) {
            for (let i = 0; i < selectorElements.length; ++i) {
                const selectorElement = selectorElements.item(i);
                if (selectorElement.style.zIndex !== '99999') {
                    this._focusElementZindexes[i] = (selectorElement.style.zIndex) ?
                        selectorElement.style.zIndex :
                        ZINDEX_NOT_SET;
                    selectorElement.style.zIndex = '99999';
                }
            }
        }
    }
    /**
     * Sets the walkthrough focus hole on given params with padding
     * @param left
     * @param top
     * @param width
     * @param height
     */
    setFocus(left, top, width, height) {
        const holeDimensions = 'left:' + (left - this.PADDING_HOLE) + 'px;' +
            'top:' + (top - this.PADDING_HOLE) + 'px;' +
            'width:' + (width + (2 * this.PADDING_HOLE)) + 'px;' +
            'height:' + (height + (2 * this.PADDING_HOLE)) + 'px;';
        if (this.walkthroughHoleElements) {
            this.walkthroughHoleElements.setAttribute('style', holeDimensions);
        }
    }
    /**
     * Set the focus on one element
     */
    setFocusOnElement() {
        this.setElementLocations();
    }
    /**
     * Send an output event
     */
    onWalkthroughContentClicked() {
        this.onWalkthroughContentClickedEvent.emit();
    }
    /**
     * Set the padding of the tip icon
     * @param iconPaddingLeft
     * @param iconPaddingTop
     */
    setTipIconPadding(iconPaddingLeft, iconPaddingTop) {
        let iconLocation = '';
        if (iconPaddingTop) {
            iconLocation += 'margin-top:' + iconPaddingTop + 'px;';
        }
        if (iconPaddingLeft) {
            iconLocation += 'right:' + iconPaddingLeft + '%;';
        }
        this.walkthroughIconElement.setAttribute('style', iconLocation);
    }
    /**
     * Close the walkthrough
     * @param event
     */
    onCloseClicked(event) {
        if ((!this.useButton) ||
            (event.currentTarget.className.indexOf(this.DOM_WALKTHROUGH_DONE_BUTTON_CLASS) > -1)) {
            this.closeWalkthrough();
        }
    }
    /**
     * close the walkthgrough and sen an output event
     */
    closeWalkthrough() {
        this.onWalkthroughHideEvent.emit();
        // to avoid disturbance with other SVG it is remove from the DOM
        const arrowElement = this.element.nativeElement.querySelector(this.DOM_WALKTHROUGH_ARROW_CLASS);
        if (arrowElement.children.length > 0) {
            arrowElement.children[0].remove();
        }
        this.isVisible = false;
        // reset z-index on selectedElement
        const selectedElements = (this.focusElementSelector) ? document.querySelectorAll(this.focusElementSelector) : null;
        if (selectedElements) {
            for (let i = 0; i < selectedElements.length; ++i) {
                const curElement = selectedElements.item(i);
                if (this._focusElementZindexes[i] !== ZINDEX_NOT_SET) {
                    curElement.style.zIndex = this._focusElementZindexes[i];
                }
                else {
                    curElement.style.zIndex = 'auto';
                }
            }
            this._focusElementZindexes = [];
        }
    }
};
tslib_1.__decorate([
    ViewChild('walkthroughcomponent'),
    tslib_1.__metadata("design:type", ElementRef)
], WalkthroughComponent.prototype, "element", void 0);
tslib_1.__decorate([
    Input('walkthrough-type'),
    tslib_1.__metadata("design:type", String)
], WalkthroughComponent.prototype, "walkthroughType", void 0);
tslib_1.__decorate([
    Input('button-caption'),
    tslib_1.__metadata("design:type", String)
], WalkthroughComponent.prototype, "buttonCaption", void 0);
tslib_1.__decorate([
    Input('use-button'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "useButton", void 0);
tslib_1.__decorate([
    Input('main-caption'),
    tslib_1.__metadata("design:type", String)
], WalkthroughComponent.prototype, "mainCaption", void 0);
tslib_1.__decorate([
    Input('icon'),
    tslib_1.__metadata("design:type", String)
], WalkthroughComponent.prototype, "walkthroughIconWanted", void 0);
tslib_1.__decorate([
    Input('walkthrough-hero-image'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "walkthroughHeroImage", void 0);
tslib_1.__decorate([
    Input('has-glow'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "hasGlow", void 0);
tslib_1.__decorate([
    Input('force-caption-location'),
    tslib_1.__metadata("design:type", String)
], WalkthroughComponent.prototype, "forceCaptionLocation", void 0);
tslib_1.__decorate([
    Input('has-backdrop'),
    tslib_1.__metadata("design:type", Boolean)
], WalkthroughComponent.prototype, "hasBackdrop", void 0);
tslib_1.__decorate([
    Input('is-round'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "isRound", void 0);
tslib_1.__decorate([
    Input('icon-padding-left'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "iconPaddingLeft", void 0);
tslib_1.__decorate([
    Input('icon-padding-top'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "iconPaddingTop", void 0);
tslib_1.__decorate([
    Input('tip-icon-location'),
    tslib_1.__metadata("design:type", String)
], WalkthroughComponent.prototype, "tipIconLocation", void 0);
tslib_1.__decorate([
    Input('tip-color'),
    tslib_1.__metadata("design:type", String)
], WalkthroughComponent.prototype, "tipColor", void 0);
tslib_1.__decorate([
    Input('focus-element-selector'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "focusElementSelector", void 0);
tslib_1.__decorate([
    Input('focus-element-interactive'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "focusElementInteractive", void 0);
tslib_1.__decorate([
    Input('is-active'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "isActive", void 0);
tslib_1.__decorate([
    Output('on-walkthrough-show'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "onWalkthroughShowEvent", void 0);
tslib_1.__decorate([
    Output('on-walkthrough-hide'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "onWalkthroughHideEvent", void 0);
tslib_1.__decorate([
    Output('on-walkthrough-content-clicked'),
    tslib_1.__metadata("design:type", Object)
], WalkthroughComponent.prototype, "onWalkthroughContentClickedEvent", void 0);
tslib_1.__decorate([
    HostListener('window:resize', ['$event']),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", [Object]),
    tslib_1.__metadata("design:returntype", void 0)
], WalkthroughComponent.prototype, "onResize", null);
WalkthroughComponent = tslib_1.__decorate([
    Component({
        selector: 'ngx-walkthrough',
        template: `
  <div #walkthroughcomponent class="{{DOM_WALKTHROUGH_CLASS}}" [hidden]="!isVisible" [ngClass]="{'walkthrough-active': isVisible}" (click)="onCloseClicked($event)">
  <div class="walkthrough-container walkthrough-container-transparency" [hidden]="walkthroughType!=='transparency'">
    <div class="walkthrough-inner">
      <div class="{{DOM_TRANSCLUDE}}">
        <ng-content select="img"></ng-content>
      </div>
      <div class="walkthrough-non-transclude-template" [hidden]="hasTransclude">
        <div class="walkthrough-text-container" [ngClass]="{'walkthrough-top': (!forceCaptionLocation || forceCaptionLocation==='TOP'), 'walkthrough-bottom': forceCaptionLocation==='BOTTOM'}">
          <pre class="walkthrough-element walkthrough-text" [innerHTML]="mainCaption"></pre>
          <img *ngIf="walkthroughHeroImage" class="walkthrough-element walkthrough-hero-image" src="{{walkthroughHeroImage}}" (click)="onWalkthroughContentClicked()">
        </div>
        <img class="walkthrough-element walkthrough-icon" [hidden]="walkthroughIconWanted && walkthroughIconWanted==='arrow'" src="{{walkthroughIcon}}">
        <div class="walkthrough-element walkthrough-arrow" [hidden]="walkthroughIconWanted!=='arrow'"></div>
        <button class="walkthrough-element walkthrough-button-positive walkthrough-done-button" type="button" *ngIf="useButton" (click)="onCloseClicked($event)">
          {{ buttonCaption }}
        </button>
      </div>
    </div>
  </div>
  <div class="walkthrough-container walkthrough-container-tip" [hidden]="walkthroughType!=='tip'">
    <div class="walkthrough-inner" [ngClass]="{'walkthrough-top': (!forceCaptionLocation || forceCaptionLocation==='TOP'), 'walkthrough-bottom': (forceCaptionLocation==='BOTTOM')}">
      <img class="walkthrough-element walkthrough-tip-icon-text-box" [ngClass]="{'walkthrough-tip-icon-image-front': tipIconLocation==='FRONT', 'walkthrough-tip-icon-image-back': tipIconLocation=='BACK'}"
        [hidden]="walkthroughIconWanted && walkthroughIconWanted==='arrow'" src="{{walkthroughIcon}}" alt="icon">
      <button class="walkthrough-done-button walkthrough-tip-done-button-text-box" [ngClass]="{'walkthrough-tip-done-button-no-icon': !closeIcon}"
        type="button" *ngIf="useButton" (click)="onCloseClicked($event)">
        <img class="walkthrough-tip-button-image-text-box" src="{{closeIcon}}" alt="x">
      </button>
      <div class="walkthrough-element walkthrough-tip-text-box" (click)="onWalkthroughContentClicked()" [ngClass]="{'walkthrough-tip-text-box-color-black': tipColor=='BLACK', 'walkthrough-tip-text-box-color-white': tipColor=='WHITE'}">
        <pre [innerHTML]="mainCaption"></pre>
        <img *ngIf="walkthroughHeroImage" class="walkthrough-element walkthrough-hero-image" src="{{walkthroughHeroImage}}">
        <div class="{{DOM_TRANSCLUDE}}">
          <ng-content select="img"></ng-content>
        </div>
      </div>
    </div>
  </div>
  <div [hidden]="!hasBackdrop" class="walkthrough-hole" [ngClass]="{'walkthrough-hole-round': isRound}" (click)="onWalkthroughContentClicked()">
  </div>
  <div [hidden]="!(hasGlow && (focusElementSelector))" class="walkthrough-hole walkthrough-hole-glow" [ngClass]="{'walkthrough-hole-round': isRound}">
  </div>
</div>
`,
        styles: [`
  .walkthrough-hole-glow {
      position: absolute;
      outline: none;
      border: 2px solid #FFFF66 !important;
      box-shadow: 0 0 36px #FFFF66 !important;
      -webkit-appearance: none;
      box-sizing: border-box;
  }

  .walkthrough-background {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: initial;
      text-align: center;
      -webkit-transition: height 0s ease-out .2s, opacity .2s ease-out;
      -moz-transition: height 0s ease-out .2s, opacity .2s ease-out;
      -o-transition: height 0s ease-out .2s, opacity .2s ease-out;
      transition: height 0s ease-out .2s, opacity .2s ease-out;
      opacity: 0;
      height: 0;
      overflow: hidden;
      z-index: 1000;
  }

  .walkthrough-hole {
      position: absolute;
      -moz-box-shadow: 0 0 0 1997px rgba(0, 0, 0, 0.8);
      -webkit-box-shadow: 0 0 0 1997px rgba(0, 0, 0, 0.8);
      box-shadow: 0 0 0 1997px rgba(0, 0, 0, 0.8);
      -webkit-appearance: none;
  }

  .walkthrough-element.walkthrough-text {
      margin-top: 10%;
      width: 50%;
      color: #fff;
      text-align: center;
  }

  .walkthrough-element.walkthrough-done-button {
      position: absolute;
      bottom: 30px;
      height: 30px;
      width: 80px;
      display: inline-block;
      right: 30px;
      margin: 0 auto;
  }

  .walkthrough-button-positive {
      border-color: #0c63ee;
      background-color: #387ef5;
      color: #fff;
  }

  .walkthrough-button-positive:hover {
      color: #fff;
      text-decoration: none;
  }

  .walkthrough-button-positive.active {
      border-color: #0c63ee;
      background-color: #0c63ee;
      box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.1);
  }

  .walkthrough-element.walkthrough-icon {
      height: 200px;
  }

  .walkthrough-element.walkthrough-arrow {
      color: #ffffff;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
  }

  .walkthrough-element {
      z-index: 1001;
      position: relative;
      margin-left: auto;
      margin-right: auto;
  }

  .walkthrough-background.walkthrough-active {
      -webkit-transition: opacity .2s ease-out;
      -moz-transition: opacity .2s ease-out;
      -o-transition: opacity .2s ease-out;
      transition: opacity .2s ease-out;
      opacity: 1;
      height: 100%;
      pointer-events: all;
  }

  .walkthrough-transclude {
      position: relative;
      z-index: 2;
      width: 100%;
      height: 100%;
  }

  .walkthrough-hole-round {
      border-radius: 200px;
  }

  .walkthrough-tip-text-box {
      /*top: 128px;*/
      position: relative;
      margin-left: 16px;
      margin-right: 16px;
      border: 2px solid;
      border-radius: 35px;
      padding: 14px;
      word-break: break-all !important;

      /*margin-top: 0;*/
      /*margin-bottom: 0;*/
  }

  .walkthrough-container {
      float: left;
      position: relative;
      height: 100%;
      width: 100%;
  }

  .walkthrough-inner {
      z-index: 3;
      width: 100%;
  }

  .walkthrough-container-transparency > .walkthrough-inner {
      height: 100%;
  }

  .walkthrough-text-container {
      position: absolute;
      width: 100%;
  }

  .walkthrough-container-tip .walkthrough-top, .walkthrough-container-transparency .walkthrough-top {
      top: 15px;
  }

  .walkthrough-container-tip .walkthrough-bottom {
      bottom: 0;
  }

  /* take 'done' button into consideration */
  .walkthrough-container-transparency .walkthrough-bottom {
      bottom: 70px;
  }

  .walkthrough-tip-icon-image-front {
      z-index: 1002;
  }

  .walkthrough-tip-icon-image-back {
      z-index: 999;
  }

  .walkthrough-tip-icon-text-box {
      height: 142px;

      /*right: 9%;*/
      position: relative;
      margin-bottom: -32px;
      margin-right: -250px;

      /*bottom: 70px;*/
  }

  .walkthrough-tip-done-button-text-box {
      /*top: 109px;*/
      /*bottom: 59px;*/
      position: relative;
      z-index: 1002;

      /*right: -7px;*/
      margin-top: 107px;
      background-color: transparent;
      border: 0;
      float: right;
  }

  .walkthrough-tip-done-button-no-icon {
      margin-top: -13px !important;
  }

  .walkthrough-tip-button-image-text-box {
      width: 42px;
      height: 42px;
  }

  .walkthrough-tip-text-box-color-black {
      border-color: #ffffff;
      background-color: #000000;
      color: #ffffff;
  }

  .walkthrough-tip-text-box-color-white {
      border-color: #000000;
      background-color: #ffffff;
  }

  .walkthrough-hero-image {
      margin-top: 15px;
  }

  .walkthrough-transclude img {
      height: 100vh;
      width: 100%;
  }

  pre {
      white-space: pre-wrap;
  }
  `]
    }),
    tslib_1.__metadata("design:paramtypes", [])
], WalkthroughComponent);
export { WalkthroughComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Fsa3Rocm91Z2guY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXdhbGt0aHJvdWdoLyIsInNvdXJjZXMiOlsiY29tcG9uZW50cy93YWxrdGhyb3VnaC5jb21wb25lbnQvd2Fsa3Rocm91Z2guY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDNUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNoRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDaEQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNoRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDdEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBZ0IsTUFBTSxlQUFlLENBQUM7QUFJMUgsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDO0FBZ1JoQyxJQUFhLG9CQUFvQixHQUFqQztJQXlGRTtRQXZGQSwwQkFBcUIsR0FBYSxFQUFFLENBQUM7UUFFckMsMEJBQXFCLEdBQUcsd0JBQXdCLENBQUM7UUFDakQsNENBQXVDLEdBQUcsbUJBQW1CLENBQUM7UUFDOUQsbUNBQThCLEdBQUcsMkJBQTJCLENBQUM7UUFDN0QsK0JBQTBCLEdBQUcsbUJBQW1CLENBQUM7UUFDakQsNENBQXVDLEdBQUcsbUJBQW1CLENBQUM7UUFDOUQsbUNBQThCLEdBQUcsZ0NBQWdDLENBQUM7UUFDbEUsZ0NBQTJCLEdBQUcsb0JBQW9CLENBQUM7UUFDbkQsc0NBQWlDLEdBQUcseUJBQXlCLENBQUM7UUFDOUQsbUJBQWMsR0FBRyx3QkFBd0IsQ0FBQztRQUMxQyx3QkFBbUIsR0FBRyxTQUFTLENBQUM7UUFDaEMsaUJBQVksR0FBRyxDQUFDLENBQUM7UUFDakIsd0JBQW1CLEdBQUcsQ0FBQyxDQUFDO1FBQ3hCLHlCQUFvQixHQUFHLEVBQUUsQ0FBQztRQUUxQixjQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ2xCLGtCQUFhLEdBQUcsS0FBSyxDQUFDO1FBU3RCLDREQUE0RDtRQUU1RCw0REFBNEQ7UUFFNUQsNERBQTREO1FBRTVELDREQUE0RDtRQUU1RCw4REFBOEQ7UUFFOUQsd0RBQXdEO1FBRXhELDBGQUEwRjtRQUMxRixlQUFVLEdBQVcsSUFBSSxVQUFVLEVBQUUsQ0FBQyxVQUFVLENBQUM7UUFFakQsZUFBVSxHQUFXLElBQUksVUFBVSxFQUFFLENBQUMsVUFBVSxDQUFDO1FBRWpELGVBQVUsR0FBVyxJQUFJLFVBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQztRQUVqRCxlQUFVLEdBQVcsSUFBSSxVQUFVLEVBQUUsQ0FBQyxVQUFVLENBQUM7UUFFakQsZ0JBQVcsR0FBVyxJQUFJLFdBQVcsRUFBRSxDQUFDLFdBQVcsQ0FBQztRQUVwRCxhQUFRLEdBQVcsSUFBSSxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUM7UUFPdEIsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUlwQixZQUFPLEdBQUcsS0FBSyxDQUFDO1FBSWhCLFlBQU8sR0FBRyxLQUFLLENBQUM7UUFDUCxvQkFBZSxHQUFHLEVBQUUsQ0FBQztRQUN0QixtQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUlkLHlCQUFvQixHQUFFLEVBQUUsQ0FBQztRQUV0Qiw0QkFBdUIsR0FBRyxLQUFLLENBQUM7UUFFaEQsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUVOLDJCQUFzQixHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFDbEQsMkJBQXNCLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQztRQUN2QyxxQ0FBZ0MsR0FBRyxJQUFJLFlBQVksRUFBUSxDQUFDO0lBVXRHLENBQUM7SUFQRCxRQUFRLENBQUMsS0FBVTtRQUNqQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDdkIsQ0FBQztJQUNILENBQUM7SUFLRCxXQUFXLENBQUMsT0FBc0I7UUFDaEMsR0FBRyxDQUFDLENBQUMsTUFBTSxRQUFRLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQztZQUMvQixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDckMsTUFBTSxNQUFNLEdBQWlCLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDM0MsRUFBRSxDQUFDLENBQUMsUUFBUSxLQUFLLFVBQVUsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztvQkFDbkQsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7b0JBQzlCLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztnQkFDdkMsQ0FBQztZQUNQLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVELHFCQUFxQjtRQUNuQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDM0IsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILGFBQWE7UUFDWCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDM0IsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILHNCQUFzQjtRQUNwQixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUNsRyxJQUFJLENBQUMsdUJBQXVCLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBZ0IsQ0FBQztRQUU5RCxNQUFNLFNBQVMsR0FBVyxDQUFDLElBQUksQ0FBQyxlQUFlLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLHVDQUF1QyxDQUFDO1FBQ2hKLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQWdCLENBQUM7UUFFdkcsTUFBTSxTQUFTLEdBQVcsQ0FBQyxJQUFJLENBQUMsZUFBZSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsOEJBQThCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyx1Q0FBdUMsQ0FBQztRQUNoSixJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFnQixDQUFDO1FBRXZHLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxDQUFDLENBQWdCLENBQUM7UUFDL0gsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxhQUFhLEVBQUUsQ0FBQyxVQUFVLENBQUM7UUFDbEQsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1IsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1FBQ2hFLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsbUJBQW1CLENBQUM7UUFDcEUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxJQUFJLENBQUMsZUFBZSxLQUFLLEtBQUssQ0FBQyxDQUFDO1FBQ3RELENBQUM7SUFDSCxDQUFDO0lBRUQsa0JBQWtCO1FBQ2hCLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDekYsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3RCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztRQUM1QixDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDbkIsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3JDLENBQUM7SUFDSCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsT0FBTyxDQUFDLElBQXNCO1FBQzVCLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2IsS0FBSyxDQUFDLFlBQVksQ0FBQztnQkFDakIsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ3pCLEtBQUssQ0FBQztZQUNSLEtBQUssQ0FBQyxZQUFZLENBQUM7Z0JBQ2pCLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO2dCQUN6QixLQUFLLENBQUM7WUFDUixLQUFLLENBQUMsWUFBWSxDQUFDO2dCQUNqQixNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztnQkFDekIsS0FBSyxDQUFDO1lBQ1IsS0FBSyxDQUFDLFlBQVksQ0FBQztnQkFDakIsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ3pCLEtBQUssQ0FBQztZQUNSLEtBQUssQ0FBQyxhQUFhLENBQUM7Z0JBQ2xCLE1BQU0sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO2dCQUMxQixLQUFLLENBQUM7WUFDUixLQUFLLENBQUMsVUFBVSxDQUFDO2dCQUNmLE1BQU0sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUN2QixLQUFLLENBQUM7WUFDUixLQUFLLENBQUMsT0FBTyxDQUFDO2dCQUNaLG9EQUFvRDtnQkFDcEQsTUFBTSxHQUFHLEVBQUUsQ0FBQztnQkFDWixLQUFLLENBQUM7UUFDVixDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsTUFBTSxLQUFLLEVBQUUsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFvQyxFQUFFLEVBQUU7Z0JBQ25FLEVBQUUsQ0FBQyxDQUFFLE9BQU8sT0FBTyxLQUFLLFFBQVMsQ0FBQyxDQUFDLENBQUM7b0JBQ2xDLE1BQU0sR0FBRyxPQUFPLENBQUM7Z0JBQ25CLENBQUM7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFDRCxNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxTQUFTLENBQUMsR0FBVztRQUNuQixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQzthQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQzthQUNqQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDWCxNQUFNLENBQUMsSUFBSSxPQUFPLENBQThCLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO2dCQUNsRSxNQUFNLE1BQU0sR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO2dCQUNoQyxNQUFNLENBQUMsU0FBUyxHQUFHLEdBQUcsRUFBRTtvQkFDcEIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDekIsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7b0JBQ3hCLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzdCLENBQUMsQ0FBQztZQUNKLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILGVBQWUsQ0FBQyxnQkFBd0IsRUFBRSxlQUF1QixFQUFFLGlCQUF5QixFQUFFLGtCQUEwQixFQUFFLFdBQW1CO1FBQzNJLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQ2pGLE1BQU0sU0FBUyxHQUFHLGlCQUFpQixDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZFLElBQUksUUFBUSxHQUFHLGlCQUFpQixDQUFDLEdBQUcsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1FBRTNGLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQztRQUNoQixJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFFbkIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxnQkFBZ0IsR0FBRyxpQkFBaUIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDMUUsT0FBTyxDQUFDLElBQUksQ0FBQywwREFBMEQsQ0FBQyxDQUFDO1lBQ3pFLE9BQU8sR0FBRyxnQkFBZ0IsR0FBRyxpQkFBaUIsR0FBRyxDQUFDLENBQUM7WUFDbkQsTUFBTSxHQUFHLElBQUksQ0FBQztRQUNoQixDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDeEMsMERBQTBEO1lBQzFELE9BQU8sR0FBRyxnQkFBZ0IsR0FBRyxXQUFXLEdBQUcsaUJBQWlCLENBQUM7UUFDL0QsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLDBEQUEwRDtZQUMxRCxPQUFPLEdBQUcsZ0JBQWdCLEdBQUcsV0FBVyxDQUFDO1FBQzNDLENBQUM7UUFDRCxJQUFJLE1BQU0sQ0FBQztRQUVYLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDWCxNQUFNLEdBQUcsZUFBZSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztRQUN2RCxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixNQUFNLEdBQUcsZUFBZSxHQUFHLENBQUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsQ0FBQztRQUVELElBQUksU0FBUyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsV0FBVyxDQUFDO1FBQ2pELGtHQUFrRztRQUNsRyxTQUFTLEdBQUcsQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO1FBQ3hELFVBQVUsR0FBRyxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7UUFDekQsUUFBUSxHQUFHLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUNuRCxXQUFXLEdBQUcsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO1FBRXRELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsS0FBSyxTQUFTLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0csSUFBSSxDQUFDLG9CQUFvQixHQUFHLFFBQVEsQ0FBQztRQUN2QyxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFvQixLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDM0MsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDWCxNQUFNLEdBQUcsZUFBZSxHQUFHLGtCQUFrQixHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztZQUM1RSxDQUFDO1lBQ0QsUUFBUSxHQUFHLGlCQUFpQixDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUM7UUFDOUQsQ0FBQztRQUVELElBQUksV0FBVyxDQUFDO1FBRWhCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDWCxXQUFXO2dCQUNULGtDQUFrQztvQkFDbEMsUUFBUTtvQkFDUix3RkFBd0Y7b0JBQ3hGLHVEQUF1RDtvQkFDdkQsV0FBVztvQkFDWCxTQUFTO29CQUNULFdBQVcsR0FBRyxPQUFPLEdBQUcsTUFBTSxHQUFHLFFBQVEsR0FBRyxNQUFNLEdBQUcsT0FBTyxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsR0FBRztvQkFDcEYsb0RBQW9EO29CQUNwRCw2QkFBNkI7b0JBQzdCLElBQUk7b0JBQ0osUUFBUSxDQUFDO1FBQ2IsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sV0FBVztnQkFDVCxrQ0FBa0M7b0JBQ2xDLFFBQVE7b0JBQ1Isd0ZBQXdGO29CQUN4Rix1REFBdUQ7b0JBQ3ZELFdBQVc7b0JBQ1gsU0FBUztvQkFDVCxZQUFZLEdBQUcsU0FBUyxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUcsSUFBSSxHQUFHLFNBQVMsR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsR0FBRyxPQUFPLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHO29CQUNoSCxvREFBb0Q7b0JBQ3BELDZCQUE2QjtvQkFDN0IsSUFBSTtvQkFDSixRQUFRLENBQUM7UUFDYixDQUFDO1FBR0QsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBQ2hHLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNwQyxDQUFDO1FBQ0QsWUFBWSxDQUFDLGtCQUFrQixDQUFDLFlBQVksRUFBRSxXQUFXLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsWUFBWSxDQUFDLFFBQWdCLEVBQUUsT0FBZSxFQUFFLFNBQWlCLEVBQUUsVUFBa0I7UUFDbkYsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1FBQ2hGLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBRWpGLE1BQU0sUUFBUSxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUM7UUFDdEMsTUFBTSxTQUFTLEdBQUcsZUFBZSxDQUFDLElBQUksR0FBRyxlQUFlLENBQUMsS0FBSyxDQUFDO1FBQy9ELE1BQU0sT0FBTyxHQUFHLGVBQWUsQ0FBQyxHQUFHLENBQUM7UUFDcEMsTUFBTSxVQUFVLEdBQUcsZUFBZSxDQUFDLEdBQUcsR0FBRyxlQUFlLENBQUMsTUFBTSxDQUFDO1FBRWhFLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztRQUMvQyxxRkFBcUY7UUFDckYsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwRCxvREFBb0Q7UUFDcEQsTUFBTSxPQUFPLEdBQUcsaUJBQWlCLENBQUMsR0FBRyxDQUFDO1FBQ3RDLE1BQU0sVUFBVSxHQUFHLGlCQUFpQixDQUFDLEdBQUcsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLENBQUM7UUFFcEUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsR0FBRyxRQUFRO1lBQ3hCLFFBQVEsR0FBRyxTQUFTO1lBQ3BCLFVBQVUsR0FBRyxPQUFPO1lBQ3BCLE9BQU8sR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEIsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsR0FBRyxRQUFRO1lBQzNCLFFBQVEsR0FBRyxTQUFTO1lBQ3BCLFVBQVUsR0FBRyxPQUFPO1lBQ3BCLE9BQU8sR0FBRyxVQUFVLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsb0JBQW9CLENBQUMsWUFBeUI7UUFDNUMsSUFBSSxLQUFhLENBQUM7UUFDbEIsSUFBSSxNQUFjLENBQUM7UUFDbkIsSUFBSSxJQUFZLENBQUM7UUFDakIsSUFBSSxHQUFXLENBQUM7UUFDaEIsS0FBSyxHQUFHLFlBQVksQ0FBQyxXQUFXLENBQUM7UUFDakMsTUFBTSxHQUFHLFlBQVksQ0FBQyxZQUFZLENBQUM7UUFDbkMsSUFBSSxHQUFHLFlBQVksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLElBQUksQ0FBQztRQUNqRCxHQUFHLEdBQUcsWUFBWSxDQUFDLHFCQUFxQixFQUFFLENBQUMsR0FBRyxDQUFDO1FBRS9DLElBQUkseUNBQXlDLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNuRixPQUFPLHlDQUF5QyxFQUFFLENBQUM7WUFDakQsSUFBSSxHQUFHLElBQUksR0FBRyx5Q0FBeUMsQ0FBQyxVQUFVLENBQUM7WUFDbkUsR0FBRyxHQUFHLEdBQUcsR0FBRyx5Q0FBeUMsQ0FBQyxTQUFTLENBQUM7WUFDaEUseUNBQXlDLEdBQUcseUNBQXlDLENBQUMsWUFBMkIsQ0FBQztRQUNwSCxDQUFDO1FBQ0QsTUFBTSxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ2hFLENBQUM7SUFFRCxhQUFhO0lBQ2IsZUFBZSxDQUFDLFlBQXlCO1FBQ3ZDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQztRQUNsQixNQUFNLHdCQUF3QixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQztRQUN6RSxNQUFNLGtCQUFrQixHQUFHLFlBQVksQ0FBQyxZQUEyQixDQUFDO1FBQ3BFLElBQUksdUJBQXVCLEdBQUcsd0JBQXVDLENBQUM7UUFDdEUsSUFBSSx3QkFBd0IsR0FBRyxrQkFBaUMsQ0FBQztRQUVqRSxPQUFPLHVCQUF1QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDMUMsd0JBQXdCLEdBQUcsa0JBQWtCLENBQUMsQ0FBQyxRQUFRO1lBQ3ZELE9BQU8sd0JBQXdCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDM0MsRUFBRSxDQUFDLENBQUMsd0JBQXdCLEtBQUssdUJBQXVCLENBQUMsQ0FBQyxDQUFDO29CQUN6RCxNQUFNLEdBQUcsdUJBQXVCLENBQUM7Z0JBQ25DLENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ04sd0JBQXdCLEdBQUcsd0JBQXdCLENBQUMsWUFBMkIsQ0FBQztnQkFDbEYsQ0FBQztZQUNILENBQUM7WUFDRCx1QkFBdUIsR0FBRyx1QkFBdUIsQ0FBQyxZQUEyQixDQUFDO1FBQ2hGLENBQUM7UUFDRCxNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxjQUFjLENBQUMsUUFBZ0IsRUFBRSxPQUFlLEVBQUUsV0FBbUIsRUFBRSxVQUFrQjtRQUN2RixNQUFNLGlCQUFpQixHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUNqRixNQUFNLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLENBQUM7UUFDNUMsTUFBTSxTQUFTLEdBQUcsaUJBQWlCLENBQUMsS0FBSyxDQUFDO1FBQzFDLE1BQU0sbUJBQW1CLEdBQUcsUUFBUSxHQUFHLFdBQVcsR0FBRyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyRSxNQUFNLGtCQUFrQixHQUFHLE9BQU8sR0FBRyxVQUFVLEdBQUcsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkUsTUFBTSxTQUFTLEdBQUcsbUJBQW1CLEdBQUcsU0FBUyxDQUFDO1FBQ2xELE1BQU0sVUFBVSxHQUFHLGtCQUFrQixHQUFHLFVBQVUsQ0FBQztRQUNuRCxrR0FBa0c7UUFDbEcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFvQixLQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLG1CQUFtQixFQUFFLGtCQUFrQixFQUFFLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakksSUFBSSxDQUFDLG9CQUFvQixHQUFHLFFBQVEsQ0FBQztRQUN2QyxDQUFDO1FBRUQsTUFBTSxZQUFZLEdBQ2hCLHFCQUFxQjtZQUNyQixPQUFPLEdBQUcsbUJBQW1CLEdBQUcsS0FBSztZQUNyQyxNQUFNLEdBQUcsa0JBQWtCLEdBQUcsS0FBSyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFFRDs7T0FFRztJQUNILG1CQUFtQjtRQUNqQixJQUFJLGdCQUFnQixHQUFHLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBRWpILEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixJQUFJLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BELEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNoQyxPQUFPLENBQUMsSUFBSSxDQUFDLHFFQUFxRSxDQUFDLENBQUM7WUFDdEYsQ0FBQztRQUNILENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLE9BQU8sQ0FBQyxLQUFLLENBQUMsa0NBQWtDLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDOUUsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1FBQzFCLENBQUM7UUFFRCxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDdkIsRUFBRSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQWdCLENBQUM7UUFDbkQsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDaEIsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDakUsTUFBTSxLQUFLLEdBQUcsaUJBQWlCLENBQUMsS0FBSyxDQUFDO1lBQ3RDLE1BQU0sTUFBTSxHQUFHLGlCQUFpQixDQUFDLE1BQU0sQ0FBQztZQUN4QyxNQUFNLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7WUFDcEMsTUFBTSxHQUFHLEdBQUcsaUJBQWlCLENBQUMsR0FBRyxDQUFDO1lBRWxDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDeEMsSUFBSSxXQUFXLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUNuRCxJQUFJLFVBQVUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ2pELEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztnQkFBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1lBQUMsQ0FBQztZQUN0QyxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztZQUFDLENBQUM7WUFFcEMsZ0RBQWdEO1lBQ2hELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsSUFBSSxJQUFJLENBQUMscUJBQXFCLEtBQUssT0FBTyxJQUFJLElBQUksQ0FBQyxlQUFlLEtBQUssY0FBYyxDQUFDLENBQUMsQ0FBQztnQkFDcEgsVUFBVSxDQUFDLEdBQUcsRUFBRTtvQkFDZCxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksR0FBRyxLQUFLLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxNQUFNLEdBQUcsQ0FBQyxFQUFFLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztnQkFDbkYsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ1YsQ0FBQztZQUNELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUMzQyxzR0FBc0c7Z0JBQ3RHLFVBQVUsQ0FBQyxHQUFHLEVBQUU7b0JBQ2QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEVBQUUsR0FBRyxHQUFHLFVBQVUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQyxDQUFDO2dCQUMzRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDVixDQUFDO1lBQ0QsK0RBQStEO1lBQy9ELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLEtBQUssS0FBSztnQkFDaEMsSUFBSSxDQUFDLHFCQUFxQixJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQztnQkFDbkUsQ0FBQyxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hELElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNwRSxDQUFDO1FBQ0gsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQztnQkFDOUIsT0FBTyxDQUFDLEtBQUssQ0FBQyxrREFBa0QsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUNoRyxDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sK0RBQStEO2dCQUMvRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxLQUFLLEtBQUs7b0JBQ2hDLElBQUksQ0FBQyxxQkFBcUIsSUFBSSxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxHQUFHLENBQUM7b0JBQ25FLENBQUMsSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNoRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7Z0JBQ3BFLENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsSUFBSSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDckQsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDakQsTUFBTSxlQUFlLEdBQWdCLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQWdCLENBQUM7Z0JBQzdFLEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUM7b0JBQzdDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQzt3QkFDOUQsZUFBZSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQzt3QkFDOUIsY0FBYyxDQUFDO29CQUNqQixlQUFlLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7Z0JBQ3pDLENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFHRDs7Ozs7O09BTUc7SUFDSCxRQUFRLENBQUMsSUFBWSxFQUFFLEdBQVcsRUFBRSxLQUFhLEVBQUUsTUFBYztRQUMvRCxNQUFNLGNBQWMsR0FDbEIsT0FBTyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxLQUFLO1lBQzVDLE1BQU0sR0FBRyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsS0FBSztZQUMxQyxRQUFRLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsS0FBSztZQUNwRCxTQUFTLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO1FBQ3pELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDckUsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILGlCQUFpQjtRQUNmLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFRDs7T0FFRztJQUNILDJCQUEyQjtRQUN6QixJQUFJLENBQUMsZ0NBQWdDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDL0MsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxpQkFBaUIsQ0FBQyxlQUF1QixFQUFFLGNBQXNCO1FBQy9ELElBQUksWUFBWSxHQUFHLEVBQUUsQ0FBQztRQUN0QixFQUFFLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1lBQ25CLFlBQVksSUFBSSxhQUFhLEdBQUcsY0FBYyxHQUFHLEtBQUssQ0FBQztRQUN6RCxDQUFDO1FBQ0QsRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztZQUNwQixZQUFZLElBQUksUUFBUSxHQUFHLGVBQWUsR0FBRyxJQUFJLENBQUM7UUFDcEQsQ0FBQztRQUNELElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFFRDs7O09BR0c7SUFDSCxjQUFjLENBQUMsS0FBVTtRQUN2QixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNuQixDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsaUNBQWlDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN2RixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUMxQixDQUFDO0lBRUgsQ0FBQztJQUVEOztPQUVHO0lBQ0gsZ0JBQWdCO1FBQ2QsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksRUFBRSxDQUFDO1FBQ25DLGdFQUFnRTtRQUNoRSxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLENBQUM7UUFDaEcsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3BDLENBQUM7UUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUV2QixtQ0FBbUM7UUFDbkMsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUNuSCxFQUFFLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDckIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDakQsTUFBTSxVQUFVLEdBQWdCLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQWdCLENBQUM7Z0JBQ3hFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsS0FBSyxjQUFjLENBQUMsQ0FBQyxDQUFDO29CQUNyRCxVQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzFELENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ04sVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO2dCQUNuQyxDQUFDO1lBQ0gsQ0FBQztZQUNELElBQUksQ0FBQyxxQkFBcUIsR0FBRyxFQUFFLENBQUM7UUFDbEMsQ0FBQztJQUNILENBQUM7Q0FFRixDQUFBO0FBN2dCQztJQURDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQztzQ0FDeEIsVUFBVTtxREFBQztBQUVNO0lBQTFCLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQzs7NkRBQW1DO0FBQ3BDO0lBQXhCLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQzs7MkRBQWlDO0FBQ3BDO0lBQXBCLEtBQUssQ0FBQyxZQUFZLENBQUM7O3VEQUFtQjtBQUNoQjtJQUF0QixLQUFLLENBQUMsY0FBYyxDQUFDOzt5REFBK0I7QUFDdEM7SUFBZCxLQUFLLENBQUMsTUFBTSxDQUFDOzttRUFBeUM7QUFDdEI7SUFBaEMsS0FBSyxDQUFDLHdCQUF3QixDQUFDOztrRUFBMkI7QUFDeEM7SUFBbEIsS0FBSyxDQUFDLFVBQVUsQ0FBQzs7cURBQWlCO0FBQ0Y7SUFBaEMsS0FBSyxDQUFDLHdCQUF3QixDQUFDOztrRUFBd0M7QUFDakQ7SUFBdEIsS0FBSyxDQUFDLGNBQWMsQ0FBQzs7eURBQWdDO0FBRW5DO0lBQWxCLEtBQUssQ0FBQyxVQUFVLENBQUM7O3FEQUFpQjtBQUNQO0lBQTNCLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQzs7NkRBQXNCO0FBQ3RCO0lBQTFCLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQzs7NERBQXFCO0FBQ25CO0lBQTNCLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQzs7NkRBQW1DO0FBQzFDO0lBQW5CLEtBQUssQ0FBQyxXQUFXLENBQUM7O3NEQUE0QjtBQUVkO0lBQWhDLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQzs7a0VBQTBCO0FBRXRCO0lBQW5DLEtBQUssQ0FBQywyQkFBMkIsQ0FBQzs7cUVBQWlDO0FBRWhEO0lBQW5CLEtBQUssQ0FBQyxXQUFXLENBQUM7O3NEQUFrQjtBQUVOO0lBQTlCLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQzs7b0VBQW1EO0FBQ2xEO0lBQTlCLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQzs7b0VBQW1EO0FBQ3ZDO0lBQXpDLE1BQU0sQ0FBQyxnQ0FBZ0MsQ0FBQzs7OEVBQTZEO0FBR3RHO0lBREMsWUFBWSxDQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDOzs7O29EQUt6QztBQXZGVSxvQkFBb0I7SUEvUWhDLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSxpQkFBaUI7UUFDM0IsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0EwQ1g7aUJBRUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0ErTkQ7S0FDRixDQUFDOztHQUNXLG9CQUFvQixDQW1rQmhDO1NBbmtCWSxvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTd2lwZV9VcCB9IGZyb20gJy4vaWNvbnMvU3dpcGVfVXAnO1xuaW1wb3J0IHsgU3dpcGVfUmlnaHQgfSBmcm9tICcuL2ljb25zL1N3aXBlX1JpZ2h0JztcbmltcG9ydCB7IFN3aXBlX0xlZnQgfSBmcm9tICcuL2ljb25zL1N3aXBlX0xlZnQnO1xuaW1wb3J0IHsgU3dpcGVfRG93biB9IGZyb20gJy4vaWNvbnMvU3dpcGVfRG93bic7XG5pbXBvcnQgeyBEb3VibGVfVGFwIH0gZnJvbSAnLi9pY29ucy9Eb3VibGVfVGFwJztcbmltcG9ydCB7IFNpbmdsZV9UYXAgfSBmcm9tICcuL2ljb25zL1NpbmdsZV9UYXAnO1xuaW1wb3J0IHsgSG90c3BvdF9DbG9zZSB9IGZyb20gJy4vaWNvbnMvSG90c3BvdF9DbG9zZSc7XG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEhvc3RMaXN0ZW5lciwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGQsIFNpbXBsZUNoYW5nZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBBZnRlckNvbnRlbnRDaGVja2VkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cblxuY29uc3QgWklOREVYX05PVF9TRVQgPSAnLTk5OTk5JztcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25neC13YWxrdGhyb3VnaCcsXG4gIHRlbXBsYXRlOiBgXG4gIDxkaXYgI3dhbGt0aHJvdWdoY29tcG9uZW50IGNsYXNzPVwie3tET01fV0FMS1RIUk9VR0hfQ0xBU1N9fVwiIFtoaWRkZW5dPVwiIWlzVmlzaWJsZVwiIFtuZ0NsYXNzXT1cInsnd2Fsa3Rocm91Z2gtYWN0aXZlJzogaXNWaXNpYmxlfVwiIChjbGljayk9XCJvbkNsb3NlQ2xpY2tlZCgkZXZlbnQpXCI+XG4gIDxkaXYgY2xhc3M9XCJ3YWxrdGhyb3VnaC1jb250YWluZXIgd2Fsa3Rocm91Z2gtY29udGFpbmVyLXRyYW5zcGFyZW5jeVwiIFtoaWRkZW5dPVwid2Fsa3Rocm91Z2hUeXBlIT09J3RyYW5zcGFyZW5jeSdcIj5cbiAgICA8ZGl2IGNsYXNzPVwid2Fsa3Rocm91Z2gtaW5uZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ7e0RPTV9UUkFOU0NMVURFfX1cIj5cbiAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiaW1nXCI+PC9uZy1jb250ZW50PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwid2Fsa3Rocm91Z2gtbm9uLXRyYW5zY2x1ZGUtdGVtcGxhdGVcIiBbaGlkZGVuXT1cImhhc1RyYW5zY2x1ZGVcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIndhbGt0aHJvdWdoLXRleHQtY29udGFpbmVyXCIgW25nQ2xhc3NdPVwieyd3YWxrdGhyb3VnaC10b3AnOiAoIWZvcmNlQ2FwdGlvbkxvY2F0aW9uIHx8IGZvcmNlQ2FwdGlvbkxvY2F0aW9uPT09J1RPUCcpLCAnd2Fsa3Rocm91Z2gtYm90dG9tJzogZm9yY2VDYXB0aW9uTG9jYXRpb249PT0nQk9UVE9NJ31cIj5cbiAgICAgICAgICA8cHJlIGNsYXNzPVwid2Fsa3Rocm91Z2gtZWxlbWVudCB3YWxrdGhyb3VnaC10ZXh0XCIgW2lubmVySFRNTF09XCJtYWluQ2FwdGlvblwiPjwvcHJlPlxuICAgICAgICAgIDxpbWcgKm5nSWY9XCJ3YWxrdGhyb3VnaEhlcm9JbWFnZVwiIGNsYXNzPVwid2Fsa3Rocm91Z2gtZWxlbWVudCB3YWxrdGhyb3VnaC1oZXJvLWltYWdlXCIgc3JjPVwie3t3YWxrdGhyb3VnaEhlcm9JbWFnZX19XCIgKGNsaWNrKT1cIm9uV2Fsa3Rocm91Z2hDb250ZW50Q2xpY2tlZCgpXCI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aW1nIGNsYXNzPVwid2Fsa3Rocm91Z2gtZWxlbWVudCB3YWxrdGhyb3VnaC1pY29uXCIgW2hpZGRlbl09XCJ3YWxrdGhyb3VnaEljb25XYW50ZWQgJiYgd2Fsa3Rocm91Z2hJY29uV2FudGVkPT09J2Fycm93J1wiIHNyYz1cInt7d2Fsa3Rocm91Z2hJY29ufX1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIndhbGt0aHJvdWdoLWVsZW1lbnQgd2Fsa3Rocm91Z2gtYXJyb3dcIiBbaGlkZGVuXT1cIndhbGt0aHJvdWdoSWNvbldhbnRlZCE9PSdhcnJvdydcIj48L2Rpdj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIndhbGt0aHJvdWdoLWVsZW1lbnQgd2Fsa3Rocm91Z2gtYnV0dG9uLXBvc2l0aXZlIHdhbGt0aHJvdWdoLWRvbmUtYnV0dG9uXCIgdHlwZT1cImJ1dHRvblwiICpuZ0lmPVwidXNlQnV0dG9uXCIgKGNsaWNrKT1cIm9uQ2xvc2VDbGlja2VkKCRldmVudClcIj5cbiAgICAgICAgICB7eyBidXR0b25DYXB0aW9uIH19XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwid2Fsa3Rocm91Z2gtY29udGFpbmVyIHdhbGt0aHJvdWdoLWNvbnRhaW5lci10aXBcIiBbaGlkZGVuXT1cIndhbGt0aHJvdWdoVHlwZSE9PSd0aXAnXCI+XG4gICAgPGRpdiBjbGFzcz1cIndhbGt0aHJvdWdoLWlubmVyXCIgW25nQ2xhc3NdPVwieyd3YWxrdGhyb3VnaC10b3AnOiAoIWZvcmNlQ2FwdGlvbkxvY2F0aW9uIHx8IGZvcmNlQ2FwdGlvbkxvY2F0aW9uPT09J1RPUCcpLCAnd2Fsa3Rocm91Z2gtYm90dG9tJzogKGZvcmNlQ2FwdGlvbkxvY2F0aW9uPT09J0JPVFRPTScpfVwiPlxuICAgICAgPGltZyBjbGFzcz1cIndhbGt0aHJvdWdoLWVsZW1lbnQgd2Fsa3Rocm91Z2gtdGlwLWljb24tdGV4dC1ib3hcIiBbbmdDbGFzc109XCJ7J3dhbGt0aHJvdWdoLXRpcC1pY29uLWltYWdlLWZyb250JzogdGlwSWNvbkxvY2F0aW9uPT09J0ZST05UJywgJ3dhbGt0aHJvdWdoLXRpcC1pY29uLWltYWdlLWJhY2snOiB0aXBJY29uTG9jYXRpb249PSdCQUNLJ31cIlxuICAgICAgICBbaGlkZGVuXT1cIndhbGt0aHJvdWdoSWNvbldhbnRlZCAmJiB3YWxrdGhyb3VnaEljb25XYW50ZWQ9PT0nYXJyb3cnXCIgc3JjPVwie3t3YWxrdGhyb3VnaEljb259fVwiIGFsdD1cImljb25cIj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJ3YWxrdGhyb3VnaC1kb25lLWJ1dHRvbiB3YWxrdGhyb3VnaC10aXAtZG9uZS1idXR0b24tdGV4dC1ib3hcIiBbbmdDbGFzc109XCJ7J3dhbGt0aHJvdWdoLXRpcC1kb25lLWJ1dHRvbi1uby1pY29uJzogIWNsb3NlSWNvbn1cIlxuICAgICAgICB0eXBlPVwiYnV0dG9uXCIgKm5nSWY9XCJ1c2VCdXR0b25cIiAoY2xpY2spPVwib25DbG9zZUNsaWNrZWQoJGV2ZW50KVwiPlxuICAgICAgICA8aW1nIGNsYXNzPVwid2Fsa3Rocm91Z2gtdGlwLWJ1dHRvbi1pbWFnZS10ZXh0LWJveFwiIHNyYz1cInt7Y2xvc2VJY29ufX1cIiBhbHQ9XCJ4XCI+XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ3YWxrdGhyb3VnaC1lbGVtZW50IHdhbGt0aHJvdWdoLXRpcC10ZXh0LWJveFwiIChjbGljayk9XCJvbldhbGt0aHJvdWdoQ29udGVudENsaWNrZWQoKVwiIFtuZ0NsYXNzXT1cInsnd2Fsa3Rocm91Z2gtdGlwLXRleHQtYm94LWNvbG9yLWJsYWNrJzogdGlwQ29sb3I9PSdCTEFDSycsICd3YWxrdGhyb3VnaC10aXAtdGV4dC1ib3gtY29sb3Itd2hpdGUnOiB0aXBDb2xvcj09J1dISVRFJ31cIj5cbiAgICAgICAgPHByZSBbaW5uZXJIVE1MXT1cIm1haW5DYXB0aW9uXCI+PC9wcmU+XG4gICAgICAgIDxpbWcgKm5nSWY9XCJ3YWxrdGhyb3VnaEhlcm9JbWFnZVwiIGNsYXNzPVwid2Fsa3Rocm91Z2gtZWxlbWVudCB3YWxrdGhyb3VnaC1oZXJvLWltYWdlXCIgc3JjPVwie3t3YWxrdGhyb3VnaEhlcm9JbWFnZX19XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ7e0RPTV9UUkFOU0NMVURFfX1cIj5cbiAgICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJpbWdcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IFtoaWRkZW5dPVwiIWhhc0JhY2tkcm9wXCIgY2xhc3M9XCJ3YWxrdGhyb3VnaC1ob2xlXCIgW25nQ2xhc3NdPVwieyd3YWxrdGhyb3VnaC1ob2xlLXJvdW5kJzogaXNSb3VuZH1cIiAoY2xpY2spPVwib25XYWxrdGhyb3VnaENvbnRlbnRDbGlja2VkKClcIj5cbiAgPC9kaXY+XG4gIDxkaXYgW2hpZGRlbl09XCIhKGhhc0dsb3cgJiYgKGZvY3VzRWxlbWVudFNlbGVjdG9yKSlcIiBjbGFzcz1cIndhbGt0aHJvdWdoLWhvbGUgd2Fsa3Rocm91Z2gtaG9sZS1nbG93XCIgW25nQ2xhc3NdPVwieyd3YWxrdGhyb3VnaC1ob2xlLXJvdW5kJzogaXNSb3VuZH1cIj5cbiAgPC9kaXY+XG48L2Rpdj5cbmAsXG4gIHN0eWxlczogW1xuICAgIGBcbiAgLndhbGt0aHJvdWdoLWhvbGUtZ2xvdyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgYm9yZGVyOiAycHggc29saWQgI0ZGRkY2NiAhaW1wb3J0YW50O1xuICAgICAgYm94LXNoYWRvdzogMCAwIDM2cHggI0ZGRkY2NiAhaW1wb3J0YW50O1xuICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgfVxuXG4gIC53YWxrdGhyb3VnaC1iYWNrZ3JvdW5kIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIGJvdHRvbTogMDtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IGluaXRpYWw7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAtd2Via2l0LXRyYW5zaXRpb246IGhlaWdodCAwcyBlYXNlLW91dCAuMnMsIG9wYWNpdHkgLjJzIGVhc2Utb3V0O1xuICAgICAgLW1vei10cmFuc2l0aW9uOiBoZWlnaHQgMHMgZWFzZS1vdXQgLjJzLCBvcGFjaXR5IC4ycyBlYXNlLW91dDtcbiAgICAgIC1vLXRyYW5zaXRpb246IGhlaWdodCAwcyBlYXNlLW91dCAuMnMsIG9wYWNpdHkgLjJzIGVhc2Utb3V0O1xuICAgICAgdHJhbnNpdGlvbjogaGVpZ2h0IDBzIGVhc2Utb3V0IC4ycywgb3BhY2l0eSAuMnMgZWFzZS1vdXQ7XG4gICAgICBvcGFjaXR5OiAwO1xuICAgICAgaGVpZ2h0OiAwO1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIHotaW5kZXg6IDEwMDA7XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtaG9sZSB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAtbW96LWJveC1zaGFkb3c6IDAgMCAwIDE5OTdweCByZ2JhKDAsIDAsIDAsIDAuOCk7XG4gICAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAwIDE5OTdweCByZ2JhKDAsIDAsIDAsIDAuOCk7XG4gICAgICBib3gtc2hhZG93OiAwIDAgMCAxOTk3cHggcmdiYSgwLCAwLCAwLCAwLjgpO1xuICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICB9XG5cbiAgLndhbGt0aHJvdWdoLWVsZW1lbnQud2Fsa3Rocm91Z2gtdGV4dCB7XG4gICAgICBtYXJnaW4tdG9wOiAxMCU7XG4gICAgICB3aWR0aDogNTAlO1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtZWxlbWVudC53YWxrdGhyb3VnaC1kb25lLWJ1dHRvbiB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDMwcHg7XG4gICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgICB3aWR0aDogODBweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHJpZ2h0OiAzMHB4O1xuICAgICAgbWFyZ2luOiAwIGF1dG87XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtYnV0dG9uLXBvc2l0aXZlIHtcbiAgICAgIGJvcmRlci1jb2xvcjogIzBjNjNlZTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzODdlZjU7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgfVxuXG4gIC53YWxrdGhyb3VnaC1idXR0b24tcG9zaXRpdmU6aG92ZXIge1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtYnV0dG9uLXBvc2l0aXZlLmFjdGl2ZSB7XG4gICAgICBib3JkZXItY29sb3I6ICMwYzYzZWU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMGM2M2VlO1xuICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgfVxuXG4gIC53YWxrdGhyb3VnaC1lbGVtZW50LndhbGt0aHJvdWdoLWljb24ge1xuICAgICAgaGVpZ2h0OiAyMDBweDtcbiAgfVxuXG4gIC53YWxrdGhyb3VnaC1lbGVtZW50LndhbGt0aHJvdWdoLWFycm93IHtcbiAgICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAwO1xuICAgICAgbGVmdDogMDtcbiAgICAgIHJpZ2h0OiAwO1xuICAgICAgYm90dG9tOiAwO1xuICB9XG5cbiAgLndhbGt0aHJvdWdoLWVsZW1lbnQge1xuICAgICAgei1pbmRleDogMTAwMTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB9XG5cbiAgLndhbGt0aHJvdWdoLWJhY2tncm91bmQud2Fsa3Rocm91Z2gtYWN0aXZlIHtcbiAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAuMnMgZWFzZS1vdXQ7XG4gICAgICAtbW96LXRyYW5zaXRpb246IG9wYWNpdHkgLjJzIGVhc2Utb3V0O1xuICAgICAgLW8tdHJhbnNpdGlvbjogb3BhY2l0eSAuMnMgZWFzZS1vdXQ7XG4gICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4ycyBlYXNlLW91dDtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBwb2ludGVyLWV2ZW50czogYWxsO1xuICB9XG5cbiAgLndhbGt0aHJvdWdoLXRyYW5zY2x1ZGUge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgei1pbmRleDogMjtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICB9XG5cbiAgLndhbGt0aHJvdWdoLWhvbGUtcm91bmQge1xuICAgICAgYm9yZGVyLXJhZGl1czogMjAwcHg7XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtdGlwLXRleHQtYm94IHtcbiAgICAgIC8qdG9wOiAxMjhweDsqL1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XG4gICAgICBib3JkZXI6IDJweCBzb2xpZDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDM1cHg7XG4gICAgICBwYWRkaW5nOiAxNHB4O1xuICAgICAgd29yZC1icmVhazogYnJlYWstYWxsICFpbXBvcnRhbnQ7XG5cbiAgICAgIC8qbWFyZ2luLXRvcDogMDsqL1xuICAgICAgLyptYXJnaW4tYm90dG9tOiAwOyovXG4gIH1cblxuICAud2Fsa3Rocm91Z2gtY29udGFpbmVyIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtaW5uZXIge1xuICAgICAgei1pbmRleDogMztcbiAgICAgIHdpZHRoOiAxMDAlO1xuICB9XG5cbiAgLndhbGt0aHJvdWdoLWNvbnRhaW5lci10cmFuc3BhcmVuY3kgPiAud2Fsa3Rocm91Z2gtaW5uZXIge1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICB9XG5cbiAgLndhbGt0aHJvdWdoLXRleHQtY29udGFpbmVyIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICB9XG5cbiAgLndhbGt0aHJvdWdoLWNvbnRhaW5lci10aXAgLndhbGt0aHJvdWdoLXRvcCwgLndhbGt0aHJvdWdoLWNvbnRhaW5lci10cmFuc3BhcmVuY3kgLndhbGt0aHJvdWdoLXRvcCB7XG4gICAgICB0b3A6IDE1cHg7XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtY29udGFpbmVyLXRpcCAud2Fsa3Rocm91Z2gtYm90dG9tIHtcbiAgICAgIGJvdHRvbTogMDtcbiAgfVxuXG4gIC8qIHRha2UgJ2RvbmUnIGJ1dHRvbiBpbnRvIGNvbnNpZGVyYXRpb24gKi9cbiAgLndhbGt0aHJvdWdoLWNvbnRhaW5lci10cmFuc3BhcmVuY3kgLndhbGt0aHJvdWdoLWJvdHRvbSB7XG4gICAgICBib3R0b206IDcwcHg7XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtdGlwLWljb24taW1hZ2UtZnJvbnQge1xuICAgICAgei1pbmRleDogMTAwMjtcbiAgfVxuXG4gIC53YWxrdGhyb3VnaC10aXAtaWNvbi1pbWFnZS1iYWNrIHtcbiAgICAgIHotaW5kZXg6IDk5OTtcbiAgfVxuXG4gIC53YWxrdGhyb3VnaC10aXAtaWNvbi10ZXh0LWJveCB7XG4gICAgICBoZWlnaHQ6IDE0MnB4O1xuXG4gICAgICAvKnJpZ2h0OiA5JTsqL1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgbWFyZ2luLWJvdHRvbTogLTMycHg7XG4gICAgICBtYXJnaW4tcmlnaHQ6IC0yNTBweDtcblxuICAgICAgLypib3R0b206IDcwcHg7Ki9cbiAgfVxuXG4gIC53YWxrdGhyb3VnaC10aXAtZG9uZS1idXR0b24tdGV4dC1ib3gge1xuICAgICAgLyp0b3A6IDEwOXB4OyovXG4gICAgICAvKmJvdHRvbTogNTlweDsqL1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgei1pbmRleDogMTAwMjtcblxuICAgICAgLypyaWdodDogLTdweDsqL1xuICAgICAgbWFyZ2luLXRvcDogMTA3cHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlcjogMDtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgfVxuXG4gIC53YWxrdGhyb3VnaC10aXAtZG9uZS1idXR0b24tbm8taWNvbiB7XG4gICAgICBtYXJnaW4tdG9wOiAtMTNweCAhaW1wb3J0YW50O1xuICB9XG5cbiAgLndhbGt0aHJvdWdoLXRpcC1idXR0b24taW1hZ2UtdGV4dC1ib3gge1xuICAgICAgd2lkdGg6IDQycHg7XG4gICAgICBoZWlnaHQ6IDQycHg7XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtdGlwLXRleHQtYm94LWNvbG9yLWJsYWNrIHtcbiAgICAgIGJvcmRlci1jb2xvcjogI2ZmZmZmZjtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDA7XG4gICAgICBjb2xvcjogI2ZmZmZmZjtcbiAgfVxuXG4gIC53YWxrdGhyb3VnaC10aXAtdGV4dC1ib3gtY29sb3Itd2hpdGUge1xuICAgICAgYm9yZGVyLWNvbG9yOiAjMDAwMDAwO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcbiAgfVxuXG4gIC53YWxrdGhyb3VnaC1oZXJvLWltYWdlIHtcbiAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gIH1cblxuICAud2Fsa3Rocm91Z2gtdHJhbnNjbHVkZSBpbWcge1xuICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICB9XG5cbiAgcHJlIHtcbiAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgfVxuICBgXVxufSlcbmV4cG9ydCBjbGFzcyBXYWxrdGhyb3VnaENvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyQ29udGVudENoZWNrZWQsIEFmdGVyVmlld0NoZWNrZWQsIE9uQ2hhbmdlcyB7XG5cbiAgX2ZvY3VzRWxlbWVudFppbmRleGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIERPTV9XQUxLVEhST1VHSF9DTEFTUyA9ICd3YWxrdGhyb3VnaC1iYWNrZ3JvdW5kJztcbiAgRE9NX1dBTEtUSFJPVUdIX1RSQU5TUEFSRU5DWV9URVhUX0NMQVNTID0gJy53YWxrdGhyb3VnaC10ZXh0JztcbiAgRE9NX1dBTEtUSFJPVUdIX1RJUF9URVhUX0NMQVNTID0gJy53YWxrdGhyb3VnaC10aXAtdGV4dC1ib3gnO1xuICBET01fV0FMS1RIUk9VR0hfSE9MRV9DTEFTUyA9ICcud2Fsa3Rocm91Z2gtaG9sZSc7XG4gIERPTV9XQUxLVEhST1VHSF9UUkFOU1BBUkVOQ1lfSUNPTl9DTEFTUyA9ICcud2Fsa3Rocm91Z2gtaWNvbic7XG4gIERPTV9XQUxLVEhST1VHSF9USVBfSUNPTl9DTEFTUyA9ICcud2Fsa3Rocm91Z2gtdGlwLWljb24tdGV4dC1ib3gnO1xuICBET01fV0FMS1RIUk9VR0hfQVJST1dfQ0xBU1MgPSAnLndhbGt0aHJvdWdoLWFycm93JztcbiAgRE9NX1dBTEtUSFJPVUdIX0RPTkVfQlVUVE9OX0NMQVNTID0gJ3dhbGt0aHJvdWdoLWRvbmUtYnV0dG9uJztcbiAgRE9NX1RSQU5TQ0xVREUgPSAnd2Fsa3Rocm91Z2gtdHJhbnNjbHVkZSc7XG4gIEJVVFRPTl9DQVBUSU9OX0RPTkUgPSAnR290IGl0ISc7XG4gIFBBRERJTkdfSE9MRSA9IDU7XG4gIFBBRERJTkdfQVJST1dfU1RBUlQgPSA1O1xuICBQQURESU5HX0FSUk9XX01BUktFUiA9IDI1O1xuXG4gIGlzVmlzaWJsZSA9IGZhbHNlO1xuICBoYXNUcmFuc2NsdWRlID0gZmFsc2U7XG5cbiAgd2Fsa3Rocm91Z2hIb2xlRWxlbWVudHMhOiBIVE1MRWxlbWVudDtcbiAgd2Fsa3Rocm91Z2hUZXh0RWxlbWVudCE6IEhUTUxFbGVtZW50O1xuICB3YWxrdGhyb3VnaEljb25FbGVtZW50ITogSFRNTEVsZW1lbnQ7XG4gIHdhbGt0aHJvdWdoQXJyb3dFbGVtZW50ITogSFRNTEVsZW1lbnQ7XG4gIGNsb3NlSWNvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICB3YWxrdGhyb3VnaEljb246IGFueTtcblxuICAvLyBzaW5nbGVfdGFwOiBzdHJpbmcgPSByZXF1aXJlKCcuLi9hc3NldHMvU2luZ2xlX1RhcC5wbmcnKTtcblxuICAvLyBkb3VibGVfdGFwOiBzdHJpbmcgPSByZXF1aXJlKCcuLi9hc3NldHMvRG91YmxlX1RhcC5wbmcnKTtcblxuICAvLyBzd2lwZV9kb3duOiBzdHJpbmcgPSByZXF1aXJlKCcuLi9hc3NldHMvU3dpcGVfRG93bi5wbmcnKTtcblxuICAvLyBzd2lwZV9sZWZ0OiBzdHJpbmcgPSByZXF1aXJlKCcuLi9hc3NldHMvU3dpcGVfTGVmdC5wbmcnKTtcblxuICAvLyBzd2lwZV9yaWdodDogc3RyaW5nID0gcmVxdWlyZSgnLi4vYXNzZXRzL1N3aXBlX1JpZ2h0LnBuZycpO1xuXG4gIC8vIHN3aXBlX3VwOiBzdHJpbmcgPSByZXF1aXJlKCcuLi9hc3NldHMvU3dpcGVfVXAucG5nJyk7XG5cbiAgLy8gdGhlIGVsZW1lbnQgaGF2ZSBiZWVuIHNlcGFyYXRlZCBhcyBpb25pYyBwcm8gY2Fubm90IGhhbmRsZSBjbGFzcyB3aXRoIHZlcnkgbGFyZ2Ugc3RyaW5nXG4gIHNpbmdsZV90YXA6IHN0cmluZyA9IG5ldyBTaW5nbGVfVGFwKCkuc2luZ2xlX3RhcDtcblxuICBkb3VibGVfdGFwOiBzdHJpbmcgPSBuZXcgRG91YmxlX1RhcCgpLmRvdWJsZV90YXA7XG5cbiAgc3dpcGVfZG93bjogc3RyaW5nID0gbmV3IFN3aXBlX0Rvd24oKS5zd2lwZV9kb3duO1xuXG4gIHN3aXBlX2xlZnQ6IHN0cmluZyA9IG5ldyBTd2lwZV9MZWZ0KCkuc3dpcGVfbGVmdDtcblxuICBzd2lwZV9yaWdodDogc3RyaW5nID0gbmV3IFN3aXBlX1JpZ2h0KCkuc3dpcGVfcmlnaHQ7XG5cbiAgc3dpcGVfdXA6IHN0cmluZyA9IG5ldyBTd2lwZV9VcCgpLnN3aXBlX3VwO1xuXG4gIEBWaWV3Q2hpbGQoJ3dhbGt0aHJvdWdoY29tcG9uZW50JylcbiAgZWxlbWVudCE6IEVsZW1lbnRSZWY7XG5cbiAgQElucHV0KCd3YWxrdGhyb3VnaC10eXBlJykgd2Fsa3Rocm91Z2hUeXBlOiBzdHJpbmd8dW5kZWZpbmVkO1xuICBASW5wdXQoJ2J1dHRvbi1jYXB0aW9uJykgYnV0dG9uQ2FwdGlvbjogc3RyaW5nfHVuZGVmaW5lZDtcbiAgQElucHV0KCd1c2UtYnV0dG9uJykgdXNlQnV0dG9uID0gZmFsc2U7XG4gIEBJbnB1dCgnbWFpbi1jYXB0aW9uJykgbWFpbkNhcHRpb246IHN0cmluZ3x1bmRlZmluZWQ7XG4gIEBJbnB1dCgnaWNvbicpIHdhbGt0aHJvdWdoSWNvbldhbnRlZDogc3RyaW5nfHVuZGVmaW5lZDtcbiAgQElucHV0KCd3YWxrdGhyb3VnaC1oZXJvLWltYWdlJykgd2Fsa3Rocm91Z2hIZXJvSW1hZ2U6IGFueTtcbiAgQElucHV0KCdoYXMtZ2xvdycpIGhhc0dsb3cgPSBmYWxzZTtcbiAgQElucHV0KCdmb3JjZS1jYXB0aW9uLWxvY2F0aW9uJykgZm9yY2VDYXB0aW9uTG9jYXRpb246IHN0cmluZ3x1bmRlZmluZWQ7XG4gIEBJbnB1dCgnaGFzLWJhY2tkcm9wJykgaGFzQmFja2Ryb3A6IGJvb2xlYW58dW5kZWZpbmVkO1xuXG4gIEBJbnB1dCgnaXMtcm91bmQnKSBpc1JvdW5kID0gZmFsc2U7XG4gIEBJbnB1dCgnaWNvbi1wYWRkaW5nLWxlZnQnKSBpY29uUGFkZGluZ0xlZnQgPSAnJztcbiAgQElucHV0KCdpY29uLXBhZGRpbmctdG9wJykgaWNvblBhZGRpbmdUb3AgPSAnJztcbiAgQElucHV0KCd0aXAtaWNvbi1sb2NhdGlvbicpIHRpcEljb25Mb2NhdGlvbjogc3RyaW5nfHVuZGVmaW5lZDtcbiAgQElucHV0KCd0aXAtY29sb3InKSB0aXBDb2xvcjogc3RyaW5nfHVuZGVmaW5lZDtcblxuICBASW5wdXQoJ2ZvY3VzLWVsZW1lbnQtc2VsZWN0b3InKSBmb2N1c0VsZW1lbnRTZWxlY3Rvcj0gJyc7XG5cbiAgQElucHV0KCdmb2N1cy1lbGVtZW50LWludGVyYWN0aXZlJykgZm9jdXNFbGVtZW50SW50ZXJhY3RpdmUgPSBmYWxzZTtcblxuICBASW5wdXQoJ2lzLWFjdGl2ZScpIGlzQWN0aXZlID0gZmFsc2U7XG5cbiAgQE91dHB1dCgnb24td2Fsa3Rocm91Z2gtc2hvdycpIG9uV2Fsa3Rocm91Z2hTaG93RXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIEBPdXRwdXQoJ29uLXdhbGt0aHJvdWdoLWhpZGUnKSBvbldhbGt0aHJvdWdoSGlkZUV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBAT3V0cHV0KCdvbi13YWxrdGhyb3VnaC1jb250ZW50LWNsaWNrZWQnKSBvbldhbGt0aHJvdWdoQ29udGVudENsaWNrZWRFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSlcbiAgb25SZXNpemUoZXZlbnQ6IGFueSkge1xuICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgdGhpcy5yZXNpemVIYW5kbGVyKCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBjaGFuZ2VzKSB7XG4gICAgICBpZiAoY2hhbmdlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgY29uc3QgY2hhbmdlOiBTaW1wbGVDaGFuZ2UgPSBjaGFuZ2VzW3Byb3BOYW1lXTtcbiAgICAgICAgICAgIGlmIChwcm9wTmFtZSA9PT0gJ2lzQWN0aXZlJyAmJiBjaGFuZ2UuY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0V2Fsa3Rocm91Z2hFbGVtZW50cygpO1xuICAgICAgICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGNoYW5nZS5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlckNvbnRlbnRDaGVja2VkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmZvY3VzRWxlbWVudFNlbGVjdG9yICYmIHRoaXMuaXNWaXNpYmxlKSB7XG4gICAgICB0aGlzLnNldEZvY3VzT25FbGVtZW50KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHJlc2l6ZSBoYW5kbGVyIG1ldGhvZFxuICAgKi9cbiAgcmVzaXplSGFuZGxlcigpIHtcbiAgICBpZiAodGhpcy5mb2N1c0VsZW1lbnRTZWxlY3RvciAmJiB0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgdGhpcy5zZXRGb2N1c09uRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBpbml0IHRoZSBlbGVtZW50IG9mIHRoZSB3YWxrdGhyb3VnaFxuICAgKi9cbiAgc2V0V2Fsa3Rocm91Z2hFbGVtZW50cygpIHtcbiAgICBjb25zdCBob2xlRWxlbWVudHMgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuRE9NX1dBTEtUSFJPVUdIX0hPTEVfQ0xBU1MpO1xuICAgIHRoaXMud2Fsa3Rocm91Z2hIb2xlRWxlbWVudHMgPSBob2xlRWxlbWVudHNbMF0gYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdCB0ZXh0Q2xhc3M6IHN0cmluZyA9ICh0aGlzLndhbGt0aHJvdWdoVHlwZSA9PT0gJ3RpcCcpID8gdGhpcy5ET01fV0FMS1RIUk9VR0hfVElQX1RFWFRfQ0xBU1MgOiB0aGlzLkRPTV9XQUxLVEhST1VHSF9UUkFOU1BBUkVOQ1lfVEVYVF9DTEFTUztcbiAgICB0aGlzLndhbGt0aHJvdWdoVGV4dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRleHRDbGFzcylbMF0gYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdCBpY29uQ2xhc3M6IHN0cmluZyA9ICh0aGlzLndhbGt0aHJvdWdoVHlwZSA9PT0gJ3RpcCcpID8gdGhpcy5ET01fV0FMS1RIUk9VR0hfVElQX0lDT05fQ0xBU1MgOiB0aGlzLkRPTV9XQUxLVEhST1VHSF9UUkFOU1BBUkVOQ1lfSUNPTl9DTEFTUztcbiAgICB0aGlzLndhbGt0aHJvdWdoSWNvbkVsZW1lbnQgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGljb25DbGFzcylbMF0gYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICB0aGlzLndhbGt0aHJvdWdoQXJyb3dFbGVtZW50ID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLkRPTV9XQUxLVEhST1VHSF9BUlJPV19DTEFTUylbMF0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlSWNvbiA9IG5ldyBIb3RzcG90X0Nsb3NlKCkuY2xvc2VfaWNvbjtcbiAgICB9LCAxMDApO1xuICAgIHRoaXMud2Fsa3Rocm91Z2hJY29uID0gdGhpcy5nZXRJY29uKHRoaXMud2Fsa3Rocm91Z2hJY29uV2FudGVkKTtcbiAgICB0aGlzLmJ1dHRvbkNhcHRpb24gPSB0aGlzLmJ1dHRvbkNhcHRpb24gfHwgdGhpcy5CVVRUT05fQ0FQVElPTl9ET05FO1xuICAgIGlmICh0aGlzLmhhc0JhY2tkcm9wID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaGFzQmFja2Ryb3AgPSAodGhpcy53YWxrdGhyb3VnaFR5cGUgIT09ICd0aXAnKTtcbiAgICB9XG4gIH1cblxuICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XG4gICAgY29uc3QgdHJhbnNsdWRlID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyB0aGlzLkRPTV9UUkFOU0NMVURFKTtcbiAgICBpZiAodHJhbnNsdWRlLmxlbmd0aCA+IDAgJiYgdHJhbnNsdWRlWzBdLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuaGFzVHJhbnNjbHVkZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XG4gICAgICB0aGlzLm9uV2Fsa3Rocm91Z2hTaG93RXZlbnQuZW1pdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGljb24gc3BlY2lmeSBieSB0aGUgaW5wdXRcbiAgICogQHBhcmFtIGljb25cbiAgICovXG4gIGdldEljb24oaWNvbjogc3RyaW5nfHVuZGVmaW5lZCkge1xuICAgIGxldCByZXR2YWwgPSAnJztcbiAgICBzd2l0Y2ggKGljb24pIHtcbiAgICAgIGNhc2UgKCdzaW5nbGVfdGFwJyk6XG4gICAgICAgIHJldHZhbCA9IHRoaXMuc2luZ2xlX3RhcDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICgnZG91YmxlX3RhcCcpOlxuICAgICAgICByZXR2YWwgPSB0aGlzLmRvdWJsZV90YXA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAoJ3N3aXBlX2Rvd24nKTpcbiAgICAgICAgcmV0dmFsID0gdGhpcy5zd2lwZV9kb3duO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgKCdzd2lwZV9sZWZ0Jyk6XG4gICAgICAgIHJldHZhbCA9IHRoaXMuc3dpcGVfbGVmdDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICgnc3dpcGVfcmlnaHQnKTpcbiAgICAgICAgcmV0dmFsID0gdGhpcy5zd2lwZV9yaWdodDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICgnc3dpcGVfdXAnKTpcbiAgICAgICAgcmV0dmFsID0gdGhpcy5zd2lwZV91cDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICgnYXJyb3cnKTpcbiAgICAgICAgLy8gUmV0dXJuIG5vdGhpbmcsIHVzaW5nIG90aGVyIGRvbSBlbGVtZW50IGZvciBhcnJvd1xuICAgICAgICByZXR2YWwgPSAnJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKHJldHZhbCA9PT0gJycgJiYgaWNvbiAmJiBpY29uLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHZhbCA9IGljb247XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudG9EYXRhVVJMKHJldHZhbCkudGhlbigoZGF0YVVybDogc3RyaW5nIHwgQXJyYXlCdWZmZXIgfCBudWxsKSA9PiB7XG4gICAgICAgIGlmICggdHlwZW9mIGRhdGFVcmwgPT09ICdzdHJpbmcnICkge1xuICAgICAgICAgIHJldHZhbCA9IGRhdGFVcmw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdXJsIGluIGJsb2JcbiAgICogQHBhcmFtIHVybFxuICAgKi9cbiAgdG9EYXRhVVJMKHVybDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IG51bGw+IHtcbiAgICByZXR1cm4gZmV0Y2godXJsKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuYmxvYigpKVxuICAgICAgLnRoZW4oYmxvYiA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IG51bGw+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgICAgICAgICByZWFkZXIub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSB0ZXh0IHBvc2l0aW9uIGFjY29yZGludCB0aGUgaG9sZSBhbmQgYXJyb3cgcG9zaXRpb24gcGx1cyBzZXQgdGhlIGFycm93XG4gICAqIEBwYXJhbSBwb2ludFN1YmplY3RMZWZ0XG4gICAqIEBwYXJhbSBwb2ludFN1YmplY3RUb3BcbiAgICogQHBhcmFtIHBvaW50U3ViamVjdFdpZHRoXG4gICAqIEBwYXJhbSBwb2ludFN1YmplY3RIZWlnaHRcbiAgICogQHBhcmFtIHBhZGRpbmdMZWZ0XG4gICAqL1xuICBzZXRBcnJvd0FuZFRleHQocG9pbnRTdWJqZWN0TGVmdDogbnVtYmVyLCBwb2ludFN1YmplY3RUb3A6IG51bWJlciwgcG9pbnRTdWJqZWN0V2lkdGg6IG51bWJlciwgcG9pbnRTdWJqZWN0SGVpZ2h0OiBudW1iZXIsIHBhZGRpbmdMZWZ0OiBudW1iZXIpIHtcbiAgICBjb25zdCBvZmZzZXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0T2Zmc2V0Q29vcmRpbmF0ZXModGhpcy53YWxrdGhyb3VnaFRleHRFbGVtZW50KTtcbiAgICBjb25zdCBzdGFydExlZnQgPSBvZmZzZXRDb29yZGluYXRlcy5sZWZ0ICsgb2Zmc2V0Q29vcmRpbmF0ZXMud2lkdGggLyAyO1xuICAgIGxldCBzdGFydFRvcCA9IG9mZnNldENvb3JkaW5hdGVzLnRvcCArIG9mZnNldENvb3JkaW5hdGVzLmhlaWdodCArIHRoaXMuUEFERElOR19BUlJPV19TVEFSVDtcblxuICAgIGxldCBlbmRMZWZ0ID0gMDtcbiAgICBsZXQgaXNMaW5lID0gZmFsc2U7XG5cbiAgICBpZiAoTWF0aC5hYnMoc3RhcnRMZWZ0IC0gKHBvaW50U3ViamVjdExlZnQgKyBwb2ludFN1YmplY3RXaWR0aCAvIDIpKSA8IDEwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0hvbGUgZWxlbWVudCBhbmQgdGV4dCBhcmUgaW5saW5lIGxpbmUgYXJyb3cgd2lsbCBiZSB1c2VkJyk7XG4gICAgICBlbmRMZWZ0ID0gcG9pbnRTdWJqZWN0TGVmdCArIHBvaW50U3ViamVjdFdpZHRoIC8gMjtcbiAgICAgIGlzTGluZSA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChzdGFydExlZnQgPiBwb2ludFN1YmplY3RMZWZ0KSB7XG4gICAgICAvLyBJZiBob2xlIGxlZnQgdG8gdGV4dCBzZXQgYXJyb3cgdG8gcG9pbnQgdG8gbWlkZGxlIHJpZ2h0XG4gICAgICBlbmRMZWZ0ID0gcG9pbnRTdWJqZWN0TGVmdCArIHBhZGRpbmdMZWZ0ICsgcG9pbnRTdWJqZWN0V2lkdGg7XG4gICAgfSBlbHNlIGlmIChzdGFydExlZnQgPCBwb2ludFN1YmplY3RMZWZ0KSB7XG4gICAgICAvLyBJZiBob2xlIHJpZ2h0IHRvIHRleHQgc2V0IGFycm93IHRvIHBvaW50IHRvIG1pZGRsZSBsZWZ0XG4gICAgICBlbmRMZWZ0ID0gcG9pbnRTdWJqZWN0TGVmdCAtIHBhZGRpbmdMZWZ0O1xuICAgIH1cbiAgICBsZXQgZW5kVG9wO1xuXG4gICAgaWYgKGlzTGluZSkge1xuICAgICAgZW5kVG9wID0gcG9pbnRTdWJqZWN0VG9wIC0gdGhpcy5QQURESU5HX0FSUk9XX01BUktFUjtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5kVG9wID0gcG9pbnRTdWJqZWN0VG9wICsgKHBvaW50U3ViamVjdEhlaWdodCAvIDIpO1xuICAgIH1cblxuICAgIGxldCBhcnJvd0xlZnQsIGFycm93UmlnaHQsIGFycm93VG9wLCBhcnJvd0JvdHRvbTtcbiAgICAvLyBDaGVjayBpZiB0ZXh0IG92ZXJsYXBzIGljb24gb3IgdXNlciBleHBsaWNpdGx5IHdhbnRzIHRleHQgYXQgYm90dG9tLCBpZiBkb2VzLCBtb3ZlIGl0IHRvIGJvdHRvbVxuICAgIGFycm93TGVmdCA9IChzdGFydExlZnQgPCBlbmRMZWZ0KSA/IHN0YXJ0TGVmdCA6IGVuZExlZnQ7XG4gICAgYXJyb3dSaWdodCA9IChzdGFydExlZnQgPCBlbmRMZWZ0KSA/IGVuZExlZnQgOiBzdGFydExlZnQ7XG4gICAgYXJyb3dUb3AgPSAoc3RhcnRUb3AgPCBlbmRUb3ApID8gc3RhcnRUb3AgOiBlbmRUb3A7XG4gICAgYXJyb3dCb3R0b20gPSAoc3RhcnRUb3AgPCBlbmRUb3ApID8gZW5kVG9wIDogc3RhcnRUb3A7XG5cbiAgICBpZiAodGhpcy5mb3JjZUNhcHRpb25Mb2NhdGlvbiA9PT0gdW5kZWZpbmVkICYmIHRoaXMuaXNJdGVtT25UZXh0KGFycm93TGVmdCwgYXJyb3dUb3AsIGFycm93UmlnaHQsIGFycm93Qm90dG9tKSkge1xuICAgICAgdGhpcy5mb3JjZUNhcHRpb25Mb2NhdGlvbiA9ICdCT1RUT00nO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZvcmNlQ2FwdGlvbkxvY2F0aW9uID09PSAnQk9UVE9NJykge1xuICAgICAgaWYgKGlzTGluZSkge1xuICAgICAgICBlbmRUb3AgPSBwb2ludFN1YmplY3RUb3AgKyBwb2ludFN1YmplY3RIZWlnaHQgKyB0aGlzLlBBRERJTkdfQVJST1dfTUFSS0VSO1xuICAgICAgfVxuICAgICAgc3RhcnRUb3AgPSBvZmZzZXRDb29yZGluYXRlcy50b3AgLSB0aGlzLlBBRERJTkdfQVJST1dfU1RBUlQ7XG4gICAgfVxuXG4gICAgbGV0IGFycm93U3ZnRG9tO1xuXG4gICAgaWYgKGlzTGluZSkge1xuICAgICAgYXJyb3dTdmdEb20gPVxuICAgICAgICAnPHN2ZyB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+JyArXG4gICAgICAgICc8ZGVmcz4nICtcbiAgICAgICAgJzxtYXJrZXIgaWQ9XCJhcnJvd1wiIG1hcmtlcldpZHRoPVwiMTNcIiBtYXJrZXJIZWlnaHQ9XCIxM1wiIHJlZng9XCIyXCIgcmVmeT1cIjZcIiBvcmllbnQ9XCJhdXRvXCI+JyArXG4gICAgICAgICc8cGF0aCBkPVwiTTIsMSBMMiwxMCBMMTAsNiBMMiwyXCIgc3R5bGU9XCJmaWxsOiNmZmY7XCIgLz4nICtcbiAgICAgICAgJzwvbWFya2VyPicgK1xuICAgICAgICAnPC9kZWZzPicgK1xuICAgICAgICAnPGxpbmUgeDE9JyArIGVuZExlZnQgKyAnIHkxPScgKyBzdGFydFRvcCArICcgeDI9JyArIGVuZExlZnQgKyAnIHkyPScgKyBlbmRUb3AgKyAnICcgK1xuICAgICAgICAnc3R5bGU9XCJzdHJva2U6I2ZmZjsgc3Ryb2tlLXdpZHRoOiAycHg7IGZpbGw6IG5vbmU7JyArXG4gICAgICAgICdtYXJrZXItZW5kOiB1cmwoI2Fycm93KTtcIi8+JyArXG4gICAgICAgICcvPicgK1xuICAgICAgICAnPC9zdmc+JztcbiAgICB9IGVsc2Uge1xuICAgICAgYXJyb3dTdmdEb20gPVxuICAgICAgICAnPHN2ZyB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+JyArXG4gICAgICAgICc8ZGVmcz4nICtcbiAgICAgICAgJzxtYXJrZXIgaWQ9XCJhcnJvd1wiIG1hcmtlcldpZHRoPVwiMTNcIiBtYXJrZXJIZWlnaHQ9XCIxM1wiIHJlZng9XCIyXCIgcmVmeT1cIjZcIiBvcmllbnQ9XCJhdXRvXCI+JyArXG4gICAgICAgICc8cGF0aCBkPVwiTTIsMSBMMiwxMCBMMTAsNiBMMiwyXCIgc3R5bGU9XCJmaWxsOiNmZmY7XCIgLz4nICtcbiAgICAgICAgJzwvbWFya2VyPicgK1xuICAgICAgICAnPC9kZWZzPicgK1xuICAgICAgICAnPHBhdGggZD1cIk0nICsgc3RhcnRMZWZ0ICsgJywnICsgc3RhcnRUb3AgKyAnIFEnICsgc3RhcnRMZWZ0ICsgJywnICsgZW5kVG9wICsgJyAnICsgZW5kTGVmdCArICcsJyArIGVuZFRvcCArICdcIicgK1xuICAgICAgICAnc3R5bGU9XCJzdHJva2U6I2ZmZjsgc3Ryb2tlLXdpZHRoOiAycHg7IGZpbGw6IG5vbmU7JyArXG4gICAgICAgICdtYXJrZXItZW5kOiB1cmwoI2Fycm93KTtcIi8+JyArXG4gICAgICAgICcvPicgK1xuICAgICAgICAnPC9zdmc+JztcbiAgICB9XG5cblxuICAgIGNvbnN0IGFycm93RWxlbWVudCA9IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5ET01fV0FMS1RIUk9VR0hfQVJST1dfQ0xBU1MpO1xuICAgIGlmIChhcnJvd0VsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgYXJyb3dFbGVtZW50LmNoaWxkcmVuWzBdLnJlbW92ZSgpO1xuICAgIH1cbiAgICBhcnJvd0VsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgYXJyb3dTdmdEb20pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGdpdmVuIGljb24gY292ZXJzIHRleHQgb3IgaWYgdGhlIHRleHQgY292ZXIgdGhlIGhvbGVcbiAgICogQHBhcmFtIGljb25MZWZ0XG4gICAqIEBwYXJhbSBpY29uVG9wXG4gICAqIEBwYXJhbSBpY29uUmlnaHRcbiAgICogQHBhcmFtIGljb25Cb3R0b21cbiAgICovXG4gIGlzSXRlbU9uVGV4dChpY29uTGVmdDogbnVtYmVyLCBpY29uVG9wOiBudW1iZXIsIGljb25SaWdodDogbnVtYmVyLCBpY29uQm90dG9tOiBudW1iZXIpIHtcbiAgICBjb25zdCBob2xlQ29vcmRpbmF0ZXMgPSB0aGlzLmdldE9mZnNldENvb3JkaW5hdGVzKHRoaXMud2Fsa3Rocm91Z2hIb2xlRWxlbWVudHMpO1xuICAgIGNvbnN0IG9mZnNldENvb3JkaW5hdGVzID0gdGhpcy5nZXRPZmZzZXRDb29yZGluYXRlcyh0aGlzLndhbGt0aHJvdWdoVGV4dEVsZW1lbnQpO1xuXG4gICAgY29uc3QgaG9sZUxlZnQgPSBob2xlQ29vcmRpbmF0ZXMubGVmdDtcbiAgICBjb25zdCBob2xlUmlnaHQgPSBob2xlQ29vcmRpbmF0ZXMubGVmdCArIGhvbGVDb29yZGluYXRlcy53aWR0aDtcbiAgICBjb25zdCBob2xlVG9wID0gaG9sZUNvb3JkaW5hdGVzLnRvcDtcbiAgICBjb25zdCBob2xlQm90dG9tID0gaG9sZUNvb3JkaW5hdGVzLnRvcCArIGhvbGVDb29yZGluYXRlcy5oZWlnaHQ7XG5cbiAgICBjb25zdCB0ZXh0TGVmdCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLyA0O1xuICAgIC8vIG5lZWRzIHRvIGJlIGNhbGN1bGF0ZWQgZGlmZmVyZW50bHkgZHVlIHRvIGJlaW5nIGEgJ3ByZScuIC8vb2Zmc2V0Q29vcmRpbmF0ZXMubGVmdDtcbiAgICBjb25zdCB0ZXh0UmlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIC8gNCAqIDM7XG4gICAgLy8gb2Zmc2V0Q29vcmRpbmF0ZXMubGVmdCArIG9mZnNldENvb3JkaW5hdGVzLndpZHRoO1xuICAgIGNvbnN0IHRleHRUb3AgPSBvZmZzZXRDb29yZGluYXRlcy50b3A7XG4gICAgY29uc3QgdGV4dEJvdHRvbSA9IG9mZnNldENvb3JkaW5hdGVzLnRvcCArIG9mZnNldENvb3JkaW5hdGVzLmhlaWdodDtcblxuICAgIGlmICghKGhvbGVSaWdodCA8IHRleHRMZWZ0IHx8XG4gICAgICBob2xlTGVmdCA+IHRleHRSaWdodCB8fFxuICAgICAgaG9sZUJvdHRvbSA8IHRleHRUb3AgfHxcbiAgICAgIGhvbGVUb3AgPiB0ZXh0Qm90dG9tKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuICEoaWNvblJpZ2h0IDwgdGV4dExlZnQgfHxcbiAgICAgIGljb25MZWZ0ID4gdGV4dFJpZ2h0IHx8XG4gICAgICBpY29uQm90dG9tIDwgdGV4dFRvcCB8fFxuICAgICAgaWNvblRvcCA+IHRleHRCb3R0b20pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJFY292ZXIgdGhlIG9mZnNldCBjb29yZGluYXRlc1xuICAgKiBAcGFyYW0gZm9jdXNFbGVtZW50XG4gICAqL1xuICBnZXRPZmZzZXRDb29yZGluYXRlcyhmb2N1c0VsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgbGV0IHdpZHRoOiBudW1iZXI7XG4gICAgbGV0IGhlaWdodDogbnVtYmVyO1xuICAgIGxldCBsZWZ0OiBudW1iZXI7XG4gICAgbGV0IHRvcDogbnVtYmVyO1xuICAgIHdpZHRoID0gZm9jdXNFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgIGhlaWdodCA9IGZvY3VzRWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgbGVmdCA9IGZvY3VzRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgIHRvcCA9IGZvY3VzRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG5cbiAgICBsZXQgc2FtZUFuY2VzdG9yRm9yRm9jdXNFbGVtZW50QW5kV2Fsa3Rocm91Z2ggPSB0aGlzLmdldFNhbWVBbmNlc3Rvcihmb2N1c0VsZW1lbnQpO1xuICAgIHdoaWxlIChzYW1lQW5jZXN0b3JGb3JGb2N1c0VsZW1lbnRBbmRXYWxrdGhyb3VnaCkge1xuICAgICAgbGVmdCA9IGxlZnQgLSBzYW1lQW5jZXN0b3JGb3JGb2N1c0VsZW1lbnRBbmRXYWxrdGhyb3VnaC5vZmZzZXRMZWZ0O1xuICAgICAgdG9wID0gdG9wIC0gc2FtZUFuY2VzdG9yRm9yRm9jdXNFbGVtZW50QW5kV2Fsa3Rocm91Z2gub2Zmc2V0VG9wO1xuICAgICAgc2FtZUFuY2VzdG9yRm9yRm9jdXNFbGVtZW50QW5kV2Fsa3Rocm91Z2ggPSBzYW1lQW5jZXN0b3JGb3JGb2N1c0VsZW1lbnRBbmRXYWxrdGhyb3VnaC5vZmZzZXRQYXJlbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0LCBoZWlnaHQ6IGhlaWdodCwgd2lkdGg6IHdpZHRoIH07XG4gIH1cblxuICAvLyBDaGVjayBvbmNlXG4gIGdldFNhbWVBbmNlc3Rvcihmb2N1c0VsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgbGV0IHJldHZhbCA9IG51bGw7XG4gICAgY29uc3Qgd2Fsa3Rocm91Z2hFbGVtZW50UGFyZW50ID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0UGFyZW50O1xuICAgIGNvbnN0IGZvY3VzRWxlbWVudFBhcmVudCA9IGZvY3VzRWxlbWVudC5vZmZzZXRQYXJlbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgbGV0IHdhbGt0aHJvdWdoQW5jZXN0b3JJdGVyID0gd2Fsa3Rocm91Z2hFbGVtZW50UGFyZW50IGFzIEhUTUxFbGVtZW50O1xuICAgIGxldCBmb2N1c0VsZW1lbnRBbmNlc3Rvckl0ZXIgPSBmb2N1c0VsZW1lbnRQYXJlbnQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICB3aGlsZSAod2Fsa3Rocm91Z2hBbmNlc3Rvckl0ZXIgJiYgIXJldHZhbCkge1xuICAgICAgZm9jdXNFbGVtZW50QW5jZXN0b3JJdGVyID0gZm9jdXNFbGVtZW50UGFyZW50OyAvLyByZXNldFxuICAgICAgd2hpbGUgKGZvY3VzRWxlbWVudEFuY2VzdG9ySXRlciAmJiAhcmV0dmFsKSB7XG4gICAgICAgIGlmIChmb2N1c0VsZW1lbnRBbmNlc3Rvckl0ZXIgPT09IHdhbGt0aHJvdWdoQW5jZXN0b3JJdGVyKSB7XG4gICAgICAgICAgcmV0dmFsID0gd2Fsa3Rocm91Z2hBbmNlc3Rvckl0ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9jdXNFbGVtZW50QW5jZXN0b3JJdGVyID0gZm9jdXNFbGVtZW50QW5jZXN0b3JJdGVyLm9mZnNldFBhcmVudCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2Fsa3Rocm91Z2hBbmNlc3Rvckl0ZXIgPSB3YWxrdGhyb3VnaEFuY2VzdG9ySXRlci5vZmZzZXRQYXJlbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiByZXR2YWw7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaWNvbiBkaXNwbGF5ZWQgYWNjb3JkaW5nIHRvIGRpcmVjdGl2ZSBhcmd1bWVudFxuICAgKiBAcGFyYW0gaWNvbkxlZnRcbiAgICogQHBhcmFtIGljb25Ub3BcbiAgICogQHBhcmFtIHBhZGRpbmdMZWZ0XG4gICAqIEBwYXJhbSBwYWRkaW5nVG9wXG4gICAqL1xuICBzZXRJY29uQW5kVGV4dChpY29uTGVmdDogbnVtYmVyLCBpY29uVG9wOiBudW1iZXIsIHBhZGRpbmdMZWZ0OiBudW1iZXIsIHBhZGRpbmdUb3A6IG51bWJlcikge1xuICAgIGNvbnN0IG9mZnNldENvb3JkaW5hdGVzID0gdGhpcy5nZXRPZmZzZXRDb29yZGluYXRlcyh0aGlzLndhbGt0aHJvdWdoSWNvbkVsZW1lbnQpO1xuICAgIGNvbnN0IGljb25IZWlnaHQgPSBvZmZzZXRDb29yZGluYXRlcy5oZWlnaHQ7XG4gICAgY29uc3QgaWNvbldpZHRoID0gb2Zmc2V0Q29vcmRpbmF0ZXMud2lkdGg7XG4gICAgY29uc3QgaWNvbkxlZnRXaXRoUGFkZGluZyA9IGljb25MZWZ0ICsgcGFkZGluZ0xlZnQgLSAoaWNvbldpZHRoIC8gNCk7XG4gICAgY29uc3QgaWNvblRvcFdpdGhQYWRkaW5nID0gaWNvblRvcCArIHBhZGRpbmdUb3AgLSAoaWNvbkhlaWdodCAvIDYpO1xuICAgIGNvbnN0IGljb25SaWdodCA9IGljb25MZWZ0V2l0aFBhZGRpbmcgKyBpY29uV2lkdGg7XG4gICAgY29uc3QgaWNvbkJvdHRvbSA9IGljb25Ub3BXaXRoUGFkZGluZyArIGljb25IZWlnaHQ7XG4gICAgLy8gQ2hlY2sgaWYgdGV4dCBvdmVybGFwcyBpY29uIG9yIHVzZXIgZXhwbGljaXRseSB3YW50cyB0ZXh0IGF0IGJvdHRvbSwgaWYgZG9lcywgbW92ZSBpdCB0byBib3R0b21cbiAgICBpZiAodGhpcy5mb3JjZUNhcHRpb25Mb2NhdGlvbiA9PT0gdW5kZWZpbmVkICYmIHRoaXMuaXNJdGVtT25UZXh0KGljb25MZWZ0V2l0aFBhZGRpbmcsIGljb25Ub3BXaXRoUGFkZGluZywgaWNvblJpZ2h0LCBpY29uQm90dG9tKSkge1xuICAgICAgdGhpcy5mb3JjZUNhcHRpb25Mb2NhdGlvbiA9ICdCT1RUT00nO1xuICAgIH1cblxuICAgIGNvbnN0IGljb25Mb2NhdGlvbiA9XG4gICAgICAncG9zaXRpb246IGFic29sdXRlOycgK1xuICAgICAgJ2xlZnQ6JyArIGljb25MZWZ0V2l0aFBhZGRpbmcgKyAncHg7JyArXG4gICAgICAndG9wOicgKyBpY29uVG9wV2l0aFBhZGRpbmcgKyAncHg7JztcbiAgICB0aGlzLndhbGt0aHJvdWdoSWNvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIGljb25Mb2NhdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogQXR0ZW1wdHMgdG8gaGlnaGxpZ2h0IHRoZSBnaXZlbiBlbGVtZW50IElEIGFuZCBzZXQgSWNvbiB0byBpdCBpZiBleGlzdHMsIGlmIG5vdCB1c2UgZGVmYXVsdCAtIHJpZ2h0IHVuZGVyIHRleHRcbiAgICovXG4gIHNldEVsZW1lbnRMb2NhdGlvbnMoKSB7XG4gICAgbGV0IHNlbGVjdG9yRWxlbWVudHMgPSAodGhpcy5mb2N1c0VsZW1lbnRTZWxlY3RvcikgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuZm9jdXNFbGVtZW50U2VsZWN0b3IpIDogbnVsbDtcblxuICAgIGlmIChzZWxlY3RvckVsZW1lbnRzICYmIHNlbGVjdG9yRWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHNlbGVjdG9yRWxlbWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ011bHRpcGxlIGl0ZW1zIGZpdCBzZWxlY3RvciwgZGlzcGxheWluZyBmaXJzdCB2aXNpYmxlIGFzIGZvY3VzIGl0ZW0nKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignTm8gZWxlbWVudCBmb3VuZCB3aXRoIHNlbGVjdG9yOiAnICsgdGhpcy5mb2N1c0VsZW1lbnRTZWxlY3Rvcik7XG4gICAgICBzZWxlY3RvckVsZW1lbnRzID0gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgaHRtbEVsZW1lbnQgPSBudWxsO1xuICAgIGlmIChzZWxlY3RvckVsZW1lbnRzKSB7XG4gICAgICBodG1sRWxlbWVudCA9IHNlbGVjdG9yRWxlbWVudHNbMF0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgfVxuICAgIGlmIChodG1sRWxlbWVudCkge1xuICAgICAgY29uc3Qgb2Zmc2V0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldE9mZnNldENvb3JkaW5hdGVzKGh0bWxFbGVtZW50KTtcbiAgICAgIGNvbnN0IHdpZHRoID0gb2Zmc2V0Q29vcmRpbmF0ZXMud2lkdGg7XG4gICAgICBjb25zdCBoZWlnaHQgPSBvZmZzZXRDb29yZGluYXRlcy5oZWlnaHQ7XG4gICAgICBjb25zdCBsZWZ0ID0gb2Zmc2V0Q29vcmRpbmF0ZXMubGVmdDtcbiAgICAgIGNvbnN0IHRvcCA9IG9mZnNldENvb3JkaW5hdGVzLnRvcDtcblxuICAgICAgdGhpcy5zZXRGb2N1cyhsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgbGV0IHBhZGRpbmdMZWZ0ID0gcGFyc2VGbG9hdCh0aGlzLmljb25QYWRkaW5nTGVmdCk7XG4gICAgICBsZXQgcGFkZGluZ1RvcCA9IHBhcnNlRmxvYXQodGhpcy5pY29uUGFkZGluZ1RvcCk7XG4gICAgICBpZiAoIXBhZGRpbmdMZWZ0KSB7IHBhZGRpbmdMZWZ0ID0gMDsgfVxuICAgICAgaWYgKCFwYWRkaW5nVG9wKSB7IHBhZGRpbmdUb3AgPSAwOyB9XG5cbiAgICAgIC8vIElmIEdlc3R1cmUgaWNvbiBnaXZlbiBiaW5kIGl0IHRvIGhvbGUgYXMgd2VsbFxuICAgICAgaWYgKHRoaXMud2Fsa3Rocm91Z2hJY29uV2FudGVkICYmIHRoaXMud2Fsa3Rocm91Z2hJY29uV2FudGVkICE9PSAnYXJyb3cnICYmIHRoaXMud2Fsa3Rocm91Z2hUeXBlID09PSAndHJhbnNwYXJlbmN5Jykge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnNldEljb25BbmRUZXh0KGxlZnQgKyB3aWR0aCAvIDIsIHRvcCArIGhlaWdodCAvIDIsIHBhZGRpbmdMZWZ0LCBwYWRkaW5nVG9wKTtcbiAgICAgICAgfSwgMjAwKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLndhbGt0aHJvdWdoSWNvbldhbnRlZCA9PT0gJ2Fycm93Jykge1xuICAgICAgICAvLyBOZWVkIHRvIHVwZGF0ZSB0ZXh0IGxvY2F0aW9uIGFjY29yZGluZyB0byBjb25kaXRpb25hbCBjbGFzcyBhZGRlZCAnd2Fsa3Rocm91Z2gtdHJhbnNwYXJlbmN5LWJvdHRvbSdcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRBcnJvd0FuZFRleHQobGVmdCwgdG9wICsgcGFkZGluZ1RvcCwgd2lkdGgsIGhlaWdodCwgcGFkZGluZ0xlZnQpO1xuICAgICAgICB9LCAyMDApO1xuICAgICAgfVxuICAgICAgLy8gaWYgdGlwIG1vZGUgd2l0aCBpY29uIHRoYXQgd2Ugd2FudCB0byBzZXQgcGFkZGluZyB0bywgc2V0IGl0XG4gICAgICBpZiAodGhpcy53YWxrdGhyb3VnaFR5cGUgPT09ICd0aXAnICYmXG4gICAgICAgIHRoaXMud2Fsa3Rocm91Z2hJY29uV2FudGVkICYmIHRoaXMud2Fsa3Rocm91Z2hJY29uV2FudGVkLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgKHRoaXMuaWNvblBhZGRpbmdMZWZ0IHx8IHRoaXMuaWNvblBhZGRpbmdUb3ApKSB7XG4gICAgICAgIHRoaXMuc2V0VGlwSWNvblBhZGRpbmcodGhpcy5pY29uUGFkZGluZ0xlZnQsIHRoaXMuaWNvblBhZGRpbmdUb3ApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5mb2N1c0VsZW1lbnRTZWxlY3Rvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZmluZCBlbGVtZW50IHJlcXVlc3RlZCB0byBiZSBmb2N1c2VkOiAnICsgdGhpcy5mb2N1c0VsZW1lbnRTZWxlY3Rvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiB0aXAgbW9kZSB3aXRoIGljb24gdGhhdCB3ZSB3YW50IHRvIHNldCBwYWRkaW5nIHRvLCBzZXQgaXRcbiAgICAgICAgaWYgKHRoaXMud2Fsa3Rocm91Z2hUeXBlID09PSAndGlwJyAmJlxuICAgICAgICAgIHRoaXMud2Fsa3Rocm91Z2hJY29uV2FudGVkICYmIHRoaXMud2Fsa3Rocm91Z2hJY29uV2FudGVkLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAodGhpcy5pY29uUGFkZGluZ0xlZnQgfHwgdGhpcy5pY29uUGFkZGluZ1RvcCkpIHtcbiAgICAgICAgICB0aGlzLnNldFRpcEljb25QYWRkaW5nKHRoaXMuaWNvblBhZGRpbmdMZWZ0LCB0aGlzLmljb25QYWRkaW5nVG9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmZvY3VzRWxlbWVudEludGVyYWN0aXZlICYmIHNlbGVjdG9yRWxlbWVudHMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0b3JFbGVtZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBzZWxlY3RvckVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gc2VsZWN0b3JFbGVtZW50cy5pdGVtKGkpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoc2VsZWN0b3JFbGVtZW50LnN0eWxlLnpJbmRleCAhPT0gJzk5OTk5Jykge1xuICAgICAgICAgIHRoaXMuX2ZvY3VzRWxlbWVudFppbmRleGVzW2ldID0gKHNlbGVjdG9yRWxlbWVudC5zdHlsZS56SW5kZXgpID9cbiAgICAgICAgICAgIHNlbGVjdG9yRWxlbWVudC5zdHlsZS56SW5kZXggOlxuICAgICAgICAgICAgWklOREVYX05PVF9TRVQ7XG4gICAgICAgICAgc2VsZWN0b3JFbGVtZW50LnN0eWxlLnpJbmRleCA9ICc5OTk5OSc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB3YWxrdGhyb3VnaCBmb2N1cyBob2xlIG9uIGdpdmVuIHBhcmFtcyB3aXRoIHBhZGRpbmdcbiAgICogQHBhcmFtIGxlZnRcbiAgICogQHBhcmFtIHRvcFxuICAgKiBAcGFyYW0gd2lkdGhcbiAgICogQHBhcmFtIGhlaWdodFxuICAgKi9cbiAgc2V0Rm9jdXMobGVmdDogbnVtYmVyLCB0b3A6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICBjb25zdCBob2xlRGltZW5zaW9ucyA9XG4gICAgICAnbGVmdDonICsgKGxlZnQgLSB0aGlzLlBBRERJTkdfSE9MRSkgKyAncHg7JyArXG4gICAgICAndG9wOicgKyAodG9wIC0gdGhpcy5QQURESU5HX0hPTEUpICsgJ3B4OycgK1xuICAgICAgJ3dpZHRoOicgKyAod2lkdGggKyAoMiAqIHRoaXMuUEFERElOR19IT0xFKSkgKyAncHg7JyArXG4gICAgICAnaGVpZ2h0OicgKyAoaGVpZ2h0ICsgKDIgKiB0aGlzLlBBRERJTkdfSE9MRSkpICsgJ3B4Oyc7XG4gICAgaWYgKHRoaXMud2Fsa3Rocm91Z2hIb2xlRWxlbWVudHMpIHtcbiAgICAgIHRoaXMud2Fsa3Rocm91Z2hIb2xlRWxlbWVudHMuc2V0QXR0cmlidXRlKCdzdHlsZScsIGhvbGVEaW1lbnNpb25zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBmb2N1cyBvbiBvbmUgZWxlbWVudFxuICAgKi9cbiAgc2V0Rm9jdXNPbkVsZW1lbnQoKSB7XG4gICAgdGhpcy5zZXRFbGVtZW50TG9jYXRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBhbiBvdXRwdXQgZXZlbnRcbiAgICovXG4gIG9uV2Fsa3Rocm91Z2hDb250ZW50Q2xpY2tlZCgpIHtcbiAgICB0aGlzLm9uV2Fsa3Rocm91Z2hDb250ZW50Q2xpY2tlZEV2ZW50LmVtaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHBhZGRpbmcgb2YgdGhlIHRpcCBpY29uXG4gICAqIEBwYXJhbSBpY29uUGFkZGluZ0xlZnRcbiAgICogQHBhcmFtIGljb25QYWRkaW5nVG9wXG4gICAqL1xuICBzZXRUaXBJY29uUGFkZGluZyhpY29uUGFkZGluZ0xlZnQ6IHN0cmluZywgaWNvblBhZGRpbmdUb3A6IHN0cmluZykge1xuICAgIGxldCBpY29uTG9jYXRpb24gPSAnJztcbiAgICBpZiAoaWNvblBhZGRpbmdUb3ApIHtcbiAgICAgIGljb25Mb2NhdGlvbiArPSAnbWFyZ2luLXRvcDonICsgaWNvblBhZGRpbmdUb3AgKyAncHg7JztcbiAgICB9XG4gICAgaWYgKGljb25QYWRkaW5nTGVmdCkge1xuICAgICAgaWNvbkxvY2F0aW9uICs9ICdyaWdodDonICsgaWNvblBhZGRpbmdMZWZ0ICsgJyU7JztcbiAgICB9XG4gICAgdGhpcy53YWxrdGhyb3VnaEljb25FbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBpY29uTG9jYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIHRoZSB3YWxrdGhyb3VnaFxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICovXG4gIG9uQ2xvc2VDbGlja2VkKGV2ZW50OiBhbnkpIHtcbiAgICBpZiAoKCF0aGlzLnVzZUJ1dHRvbikgfHxcbiAgICAgIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKHRoaXMuRE9NX1dBTEtUSFJPVUdIX0RPTkVfQlVUVE9OX0NMQVNTKSA+IC0xKSkge1xuICAgICAgdGhpcy5jbG9zZVdhbGt0aHJvdWdoKCk7XG4gICAgfVxuXG4gIH1cblxuICAvKipcbiAgICogY2xvc2UgdGhlIHdhbGt0aGdyb3VnaCBhbmQgc2VuIGFuIG91dHB1dCBldmVudFxuICAgKi9cbiAgY2xvc2VXYWxrdGhyb3VnaCgpIHtcbiAgICB0aGlzLm9uV2Fsa3Rocm91Z2hIaWRlRXZlbnQuZW1pdCgpO1xuICAgIC8vIHRvIGF2b2lkIGRpc3R1cmJhbmNlIHdpdGggb3RoZXIgU1ZHIGl0IGlzIHJlbW92ZSBmcm9tIHRoZSBET01cbiAgICBjb25zdCBhcnJvd0VsZW1lbnQgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuRE9NX1dBTEtUSFJPVUdIX0FSUk9XX0NMQVNTKTtcbiAgICBpZiAoYXJyb3dFbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgIGFycm93RWxlbWVudC5jaGlsZHJlblswXS5yZW1vdmUoKTtcbiAgICB9XG4gICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcblxuICAgIC8vIHJlc2V0IHotaW5kZXggb24gc2VsZWN0ZWRFbGVtZW50XG4gICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50cyA9ICh0aGlzLmZvY3VzRWxlbWVudFNlbGVjdG9yKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5mb2N1c0VsZW1lbnRTZWxlY3RvcikgOiBudWxsO1xuICAgIGlmIChzZWxlY3RlZEVsZW1lbnRzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkRWxlbWVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgY3VyRWxlbWVudDogSFRNTEVsZW1lbnQgPSBzZWxlY3RlZEVsZW1lbnRzLml0ZW0oaSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmICh0aGlzLl9mb2N1c0VsZW1lbnRaaW5kZXhlc1tpXSAhPT0gWklOREVYX05PVF9TRVQpIHtcbiAgICAgICAgICBjdXJFbGVtZW50LnN0eWxlLnpJbmRleCA9IHRoaXMuX2ZvY3VzRWxlbWVudFppbmRleGVzW2ldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1ckVsZW1lbnQuc3R5bGUuekluZGV4ID0gJ2F1dG8nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9mb2N1c0VsZW1lbnRaaW5kZXhlcyA9IFtdO1xuICAgIH1cbiAgfVxuXG59XG4iXX0=